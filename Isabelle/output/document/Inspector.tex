%
\begin{isabellebody}%
\setisabellecontext{Inspector}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Inspector\isanewline
\isanewline
\isakeyword{imports}\ Main\ CBCCasper\ LatestMessage\ StateTransition\ ConsensusSafety\isanewline
\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ agreeing\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}consensus{\isacharunderscore}value{\isacharunderscore}property\ {\isacharasterisk}\ state\ {\isacharasterisk}\ validator{\isacharparenright}\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}agreeing\ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ v{\isacharparenright}{\isachardot}\ {\isasymforall}\ c\ {\isasymin}\ L{\isacharunderscore}H{\isacharunderscore}E\ {\isasymsigma}\ v{\isachardot}\ p\ c{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ agreeing{\isacharunderscore}validators\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}consensus{\isacharunderscore}value{\isacharunderscore}property\ {\isacharasterisk}\ state{\isacharparenright}\ {\isasymRightarrow}\ validator\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}agreeing{\isacharunderscore}validators\ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardot}{\isacharbraceleft}v\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isachardot}\ agreeing\ \ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ v{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ agreeing{\isacharunderscore}validators{\isacharunderscore}type\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators{\isacharunderscore}def\ agreeing{\isacharunderscore}validators{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ observed{\isacharunderscore}type{\isacharunderscore}for{\isacharunderscore}state\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ agreeing{\isacharunderscore}validators{\isacharunderscore}finite\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ finite\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ V{\isacharunderscore}type\ agreeing{\isacharunderscore}validators{\isacharunderscore}type\ rev{\isacharunderscore}finite{\isacharunderscore}subset{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ agreeing{\isacharunderscore}validators{\isacharunderscore}are{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymsubseteq}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ agreeing{\isacharunderscore}validators{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ agreeing{\isacharunderscore}validators{\isacharunderscore}are{\isacharunderscore}not{\isacharunderscore}equivocating\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasyminter}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}\ {\isacharequal}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ agreeing{\isacharunderscore}validators{\isacharunderscore}are{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\isanewline
\ \ \ \ \ \ \ \ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators{\isacharunderscore}are{\isacharunderscore}not{\isacharunderscore}equivocating\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ disagreeing{\isacharunderscore}validators\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}consensus{\isacharunderscore}value{\isacharunderscore}property\ {\isacharasterisk}\ state{\isacharparenright}\ {\isasymRightarrow}\ validator\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}disagreeing{\isacharunderscore}validators\ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardot}\ V\ {\isacharminus}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharminus}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ disagreeing{\isacharunderscore}validators{\isacharunderscore}type\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ disagreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ disagreeing{\isacharunderscore}validators{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ disagreeing{\isacharunderscore}validators{\isacharunderscore}are{\isacharunderscore}non{\isacharunderscore}observed{\isacharunderscore}or{\isacharunderscore}not{\isacharunderscore}agreeing\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ disagreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}v\ {\isasymin}\ V\ {\isacharminus}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isachardot}\ v\ {\isasymnotin}\ observed\ {\isasymsigma}\ {\isasymor}\ {\isacharparenleft}{\isasymexists}\ c\ {\isasymin}\ L{\isacharunderscore}H{\isacharunderscore}E\ {\isasymsigma}\ v{\isachardot}\ {\isasymnot}\ p\ c{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ disagreeing{\isacharunderscore}validators{\isacharunderscore}def\ agreeing{\isacharunderscore}validators{\isacharunderscore}def\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators{\isacharunderscore}def\ agreeing{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ disagreeing{\isacharunderscore}validators{\isacharunderscore}include{\isacharunderscore}not{\isacharunderscore}agreeing{\isacharunderscore}validators\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isacharbraceleft}v\ {\isasymin}\ V\ {\isacharminus}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isachardot}\ {\isasymexists}\ c\ {\isasymin}\ L{\isacharunderscore}H{\isacharunderscore}E\ {\isasymsigma}\ v{\isachardot}\ {\isasymnot}\ p\ c{\isacharbraceright}\ {\isasymsubseteq}\ disagreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ disagreeing{\isacharunderscore}validators{\isacharunderscore}are{\isacharunderscore}non{\isacharunderscore}observed{\isacharunderscore}or{\isacharunderscore}not{\isacharunderscore}agreeing\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ weight{\isacharunderscore}measure{\isacharunderscore}agreeing{\isacharunderscore}plus{\isacharunderscore}equivocating\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymunion}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ {\isacharplus}\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight{\isacharunderscore}def\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ agreeing{\isacharunderscore}validators{\isacharunderscore}are{\isacharunderscore}not{\isacharunderscore}equivocating\ weight{\isacharunderscore}measure{\isacharunderscore}disjoint{\isacharunderscore}plus\ agreeing{\isacharunderscore}validators{\isacharunderscore}finite\ equivocating{\isacharunderscore}validators{\isacharunderscore}is{\isacharunderscore}finite\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ disagreeing{\isacharunderscore}validators{\isacharunderscore}weight{\isacharunderscore}combined\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ weight{\isacharunderscore}measure\ {\isacharparenleft}disagreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ weight{\isacharunderscore}measure\ V\ {\isacharminus}\ weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ {\isacharminus}\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ disagreeing{\isacharunderscore}validators{\isacharunderscore}def\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ weight{\isacharunderscore}measure{\isacharunderscore}agreeing{\isacharunderscore}plus{\isacharunderscore}equivocating\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight{\isacharunderscore}def\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ agreeing{\isacharunderscore}validators{\isacharunderscore}are{\isacharunderscore}not{\isacharunderscore}equivocating\ weight{\isacharunderscore}measure{\isacharunderscore}subset{\isacharunderscore}minus\ agreeing{\isacharunderscore}validators{\isacharunderscore}finite\ equivocating{\isacharunderscore}validators{\isacharunderscore}is{\isacharunderscore}finite\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ Diff{\isacharunderscore}empty\ Diff{\isacharunderscore}iff\ Int{\isacharunderscore}iff\ V{\isacharunderscore}type\ agreeing{\isacharunderscore}validators{\isacharunderscore}type\ equivocating{\isacharunderscore}validators{\isacharunderscore}type\ finite{\isacharunderscore}Diff\ old{\isachardot}prod{\isachardot}case\ subset{\isacharunderscore}iff{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ agreeing{\isacharunderscore}validators{\isacharunderscore}weight{\isacharunderscore}combined\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ weight{\isacharunderscore}measure\ V\ {\isacharminus}\ weight{\isacharunderscore}measure\ {\isacharparenleft}disagreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ {\isacharminus}\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ disagreeing{\isacharunderscore}validators{\isacharunderscore}weight{\isacharunderscore}combined\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ majority\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}validator\ set\ {\isacharasterisk}\ state{\isacharparenright}\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}majority\ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardot}\ {\isacharparenleft}weight{\isacharunderscore}measure\ v{\isacharunderscore}set\ {\isachargreater}\ {\isacharparenleft}weight{\isacharunderscore}measure\ {\isacharparenleft}V\ {\isacharminus}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ div\ {\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ majority{\isacharunderscore}driven\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}consensus{\isacharunderscore}value{\isacharunderscore}property\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}majority{\isacharunderscore}driven\ p\ {\isacharequal}\ {\isacharparenleft}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ majority\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ c\ {\isasymin}\ {\isasymepsilon}\ {\isasymsigma}{\isachardot}\ p\ c{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ max{\isacharunderscore}driven\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}consensus{\isacharunderscore}value{\isacharunderscore}property\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}max{\isacharunderscore}driven\ p\ {\isacharequal}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ {\isachargreater}\ weight{\isacharunderscore}measure\ {\isacharparenleft}disagreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ c\ {\isasymin}\ {\isasymepsilon}\ {\isasymsigma}{\isachardot}\ p\ c{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ max{\isacharunderscore}driven{\isacharunderscore}for{\isacharunderscore}future\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}consensus{\isacharunderscore}value{\isacharunderscore}property\ {\isasymRightarrow}\ state\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}max{\isacharunderscore}driven{\isacharunderscore}for{\isacharunderscore}future\ p\ {\isasymsigma}\ {\isacharequal}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacharparenright}\ {\isachargreater}\ weight{\isacharunderscore}measure\ {\isacharparenleft}disagreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ c\ {\isasymin}\ {\isasymepsilon}\ {\isasymsigma}{\isacharprime}{\isachardot}\ p\ c{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}consensus{\isacharunderscore}value{\isacharunderscore}property\ {\isacharasterisk}\ message\ {\isacharasterisk}\ validator\ {\isacharasterisk}\ state{\isacharparenright}\ {\isasymRightarrow}\ message\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}p{\isacharcomma}\ m{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardot}{\isacharbraceleft}m{\isacharprime}\ {\isasymin}\ later{\isacharunderscore}from\ {\isacharparenleft}m{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardot}\ {\isasymnot}\ p\ {\isacharparenleft}est\ m{\isacharprime}{\isacharparenright}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages{\isacharunderscore}type\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ p\ {\isasymsigma}\ v\ m{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v\ {\isasymin}\ V\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymlongrightarrow}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ m{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymsubseteq}\ M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages{\isacharunderscore}def\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ later{\isacharunderscore}from{\isacharunderscore}type{\isacharunderscore}for{\isacharunderscore}state\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ non{\isacharunderscore}equivocating{\isacharunderscore}validator{\isacharunderscore}is{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}in{\isacharunderscore}past\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v\ {\isasymsigma}{\isacharprime}{\isachardot}\ v\ {\isasymin}\ V\ {\isasymand}\ {\isacharbraceleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharbraceright}\ {\isasymsubseteq}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\ \isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ gt{\isacharunderscore}threshold\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}validator\ set\ {\isacharasterisk}\ state{\isacharparenright}\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}gt{\isacharunderscore}threshold\ \isanewline
\ \ \ \ \ \ \ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardot}{\isacharparenleft}weight{\isacharunderscore}measure\ v{\isacharunderscore}set\ {\isachargreater}\ {\isacharparenleft}weight{\isacharunderscore}measure\ V{\isacharparenright}\ div\ {\isadigit{2}}\ {\isacharplus}\ t\ div\ {\isadigit{2}}\ {\isacharminus}\ weight{\isacharunderscore}measure\ {\isacharparenleft}equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ gt{\isacharunderscore}threshold{\isacharunderscore}imps{\isacharunderscore}majority{\isacharunderscore}for{\isacharunderscore}any{\isacharunderscore}validator\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\isanewline
\ \ {\isasymlongrightarrow}\ gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\ majority\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ inspector\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}validator\ set\ {\isacharasterisk}\ state\ {\isacharasterisk}\ consensus{\isacharunderscore}value{\isacharunderscore}property{\isacharparenright}\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}inspector\ \isanewline
\ \ \ \ \ \ \ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isachardot}\ v{\isacharunderscore}set\ {\isasymnoteq}\ {\isasymemptyset}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\ v\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\isasymexists}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\isasymforall}\ v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ validator{\isacharunderscore}in{\isacharunderscore}inspector{\isacharunderscore}see{\isacharunderscore}L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}others{\isacharunderscore}is{\isacharunderscore}singleton\ {\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ v{\isacharunderscore}set\ p\ {\isasymsigma}{\isachardot}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ {\isasymand}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ \isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ v\ v{\isacharprime}{\isachardot}\ {\isacharbraceleft}v{\isacharcomma}\ v{\isacharprime}{\isacharbraceright}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymlongrightarrow}\ is{\isacharunderscore}singleton\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}imps{\isacharunderscore}everyone{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ inspector{\isacharunderscore}def\ agreeing{\isacharunderscore}validators{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}imps{\isacharunderscore}everyone{\isacharunderscore}agreeing\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ inspector{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}imps{\isacharunderscore}gt{\isacharunderscore}threshold\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharplus}{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ v{\isacharunderscore}set\ p\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\ {\isasymexists}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ inspector{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\ \ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ gt{\isacharunderscore}threshold{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ weight{\isacharunderscore}measure{\isacharunderscore}subset{\isacharunderscore}gte\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}{\isacharparenright}\ \isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ v\ \isakeyword{where}\ {\isachardoublequoteopen}v\ {\isasymin}\ v{\isacharunderscore}set\ {\isasymand}\ \ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymexists}v{\isasymin}v{\isacharunderscore}set{\isachardot}\ gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymsubseteq}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}the{\isacharunderscore}state\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}singleton\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}the{\isacharunderscore}state\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}of{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validator{\isacharunderscore}is{\isacharunderscore}singleton\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ inspector{\isacharunderscore}def\ agreeing{\isacharunderscore}validators{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}v\ {\isasymin}\ v{\isacharunderscore}set\ {\isasymand}\ gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \ \isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}\ {\isasymsubseteq}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ insert{\isacharunderscore}iff\ is{\isacharunderscore}singleton{\isacharunderscore}the{\isacharunderscore}elem{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}v\ {\isasymin}\ v{\isacharunderscore}set\ {\isasymand}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ gt{\isacharunderscore}threshold{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight{\isacharunderscore}is{\isacharunderscore}monotonic\ \ \ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}type\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}is{\isacharunderscore}singleton\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\ is{\isacharunderscore}singleton{\isacharunderscore}the{\isacharunderscore}elem\ singletonI\ subsetCE{\isacharparenright}\ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ gt{\isacharunderscore}threshold{\isacharunderscore}imps{\isacharunderscore}estimator{\isacharunderscore}agreeing\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ finite\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ c\ {\isasymin}\ {\isasymepsilon}\ {\isasymsigma}{\isachardot}\ p\ c{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ v{\isacharunderscore}set\ p\ c\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ v{\isacharunderscore}set{\isachardoublequoteclose}\ {\isachardoublequoteopen}majority{\isacharunderscore}driven\ p{\isachardoublequoteclose}\ \ {\isachardoublequoteopen}v{\isacharunderscore}set\ {\isasymsubseteq}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}c\ {\isasymin}\ {\isasymepsilon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}weight{\isacharunderscore}measure\ v{\isacharunderscore}set\ {\isasymle}\ weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ inspector{\isacharunderscore}imps{\isacharunderscore}everyone{\isacharunderscore}agreeing\isanewline
\ \ \ \ \ \ \ \ \ \ weight{\isacharunderscore}measure{\isacharunderscore}subset{\isacharunderscore}gte\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ agreeing{\isacharunderscore}validators{\isacharunderscore}type\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}weight{\isacharunderscore}measure\ v{\isacharunderscore}set\ {\isachargreater}\ {\isacharparenleft}weight{\isacharunderscore}measure\ V{\isacharparenright}\ div\ {\isadigit{2}}\ {\isacharplus}\ t\ div\ {\isadigit{2}}\ {\isacharminus}\ weight{\isacharunderscore}measure\ {\isacharparenleft}equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ gt{\isacharunderscore}threshold{\isacharunderscore}def\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}weight{\isacharunderscore}measure\ v{\isacharunderscore}set\ {\isachargreater}\ {\isacharparenleft}weight{\isacharunderscore}measure\ V{\isacharparenright}\ div\ {\isadigit{2}}\ {\isacharminus}\ weight{\isacharunderscore}measure\ {\isacharparenleft}equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}\ div\ {\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ \ {\isasymSigma}t{\isacharunderscore}def\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight{\isacharunderscore}def\ is{\isacharunderscore}faults{\isacharunderscore}lt{\isacharunderscore}threshold{\isacharunderscore}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}weight{\isacharunderscore}measure\ v{\isacharunderscore}set\ {\isachargreater}\ {\isacharparenleft}weight{\isacharunderscore}measure\ {\isacharparenleft}V\ {\isacharminus}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ div\ {\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Protocol{\isachardot}V{\isacharunderscore}type\ Protocol{\isacharunderscore}axioms\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ diff{\isacharunderscore}divide{\isacharunderscore}distrib\ equivocating{\isacharunderscore}validators{\isacharunderscore}is{\isacharunderscore}finite\ equivocating{\isacharunderscore}validators{\isacharunderscore}type\ subsetCE\ weight{\isacharunderscore}measure{\isacharunderscore}subset{\isacharunderscore}minus{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}\ {\isachargreater}\ weight{\isacharunderscore}measure\ {\isacharparenleft}V\ {\isacharminus}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}\ div\ {\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}weight{\isacharunderscore}measure\ v{\isacharunderscore}set\ {\isasymle}\ weight{\isacharunderscore}measure\ {\isacharparenleft}agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}p\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}majority{\isacharunderscore}driven\ p{\isacartoucheclose}\ \isacommand{unfolding}\isamarkupfalse%
\ majority{\isacharunderscore}driven{\isacharunderscore}def\ majority{\isacharunderscore}def\ gt{\isacharunderscore}threshold{\isacharunderscore}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}c\ {\isasymin}\ {\isasymepsilon}\ {\isasymsigma}{\isacartoucheclose}\ Mi{\isachardot}simps\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ non{\isacharunderscore}justifying{\isacharunderscore}message{\isacharunderscore}exists{\isacharunderscore}in{\isacharunderscore}M{\isacharunderscore}{\isadigit{0}}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}imps{\isacharunderscore}estimator{\isacharunderscore}agreeing\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ finite\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ c\ {\isasymin}\ {\isasymepsilon}\ {\isasymsigma}{\isachardot}\ p\ c{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ gt{\isacharunderscore}threshold{\isacharunderscore}imps{\isacharunderscore}estimator{\isacharunderscore}agreeing\ inspector{\isacharunderscore}imps{\isacharunderscore}gt{\isacharunderscore}threshold\ {\isasymSigma}t{\isacharunderscore}def\ inspector{\isacharunderscore}imps{\isacharunderscore}everyone{\isacharunderscore}agreeing{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ later{\isacharunderscore}from{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ m{\isacharprime}\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharprime}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharprime}{\isacharbraceright}\isanewline
\ \ {\isasymlongrightarrow}\ later{\isacharunderscore}from\ {\isacharparenleft}m{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ later{\isacharunderscore}from\ {\isacharparenleft}m{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharprime}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ later{\isacharunderscore}from{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ from{\isacharunderscore}sender{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ m{\isacharprime}\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharprime}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharprime}{\isacharbraceright}\isanewline
\ \ {\isasymlongrightarrow}\ from{\isacharunderscore}sender\ {\isacharparenleft}v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ from{\isacharunderscore}sender\ {\isacharparenleft}v{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharprime}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ from{\isacharunderscore}sender{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ equivocation{\isacharunderscore}status{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}\ {\isasymlongleftrightarrow}\ v\ {\isasymin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ m\ v\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ g{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}observed\ {\isasymsigma}\ {\isasymsubseteq}\ observed\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ observed{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ g{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}is{\isacharunderscore}equivocating\ {\isasymsigma}\ v\ {\isacharequal}\ is{\isacharunderscore}equivocating\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ is{\isacharunderscore}equivocating{\isacharunderscore}def\ equivocation{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}v\ {\isasymin}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}v\ {\isasymin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ equivocating{\isacharunderscore}validators{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ g{\isadigit{1}}\ g{\isadigit{2}}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}\ Un{\isacharunderscore}insert{\isacharunderscore}right\ is{\isacharunderscore}equivocating{\isacharunderscore}def\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ observed{\isacharunderscore}def\ sup{\isacharunderscore}bot{\isachardot}right{\isacharunderscore}neutral{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}\isanewline
\ \ {\isasymlongrightarrow}\ L{\isacharunderscore}H{\isacharunderscore}M\ {\isasymsigma}\ v\ {\isacharequal}\ L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ m\ v\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V{\isachardoublequoteclose}\ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}L{\isacharunderscore}H{\isacharunderscore}M\ {\isasymsigma}\ v\ {\isacharequal}\ L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}v\ {\isasymin}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isacartoucheclose}\ equivocation{\isacharunderscore}status{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}v\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}\ {\isasymand}\ v\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ equivocation{\isacharunderscore}status{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isacartoucheclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}def\ L{\isacharunderscore}M{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ later{\isacharunderscore}from{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ from{\isacharunderscore}sender{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharcomma}\ lifting{\isacharparenright}\ Un{\isacharunderscore}insert{\isacharunderscore}right\ from{\isacharunderscore}sender{\isacharunderscore}type{\isacharunderscore}for{\isacharunderscore}state\ subsetCE\ sup{\isacharunderscore}bot{\isachardot}right{\isacharunderscore}neutral{\isacharparenright}\ \ \ \ \ \ \ \isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \ \ \ \isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ agreeing{\isacharunderscore}status{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymlongleftrightarrow}\ v\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ agreeing{\isacharunderscore}validators{\isacharunderscore}def\ agreeing{\isacharunderscore}def\ L{\isacharunderscore}H{\isacharunderscore}E{\isacharunderscore}def\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators{\isacharunderscore}def\ observed{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ \isanewline
\ \ \ \ \ \ \ \ equivocation{\isacharunderscore}status{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}\isanewline
\ \ {\isasymlongrightarrow}\ L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v\ {\isacharequal}\ L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}def{\isacharparenright}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ later{\isacharunderscore}disagreeing{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ m{\isacharprime}\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharprime}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharprime}{\isacharbraceright}\isanewline
\ \ {\isasymlongrightarrow}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ m{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ m{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharprime}{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ later{\isacharunderscore}from{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}message{\isacharunderscore}from{\isacharunderscore}non{\isacharunderscore}member\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ m\ v{\isacharunderscore}set\ p\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}sender\ m\ {\isasymnotin}\ v{\isacharunderscore}set{\isachardoublequoteclose}\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\ v\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymlongrightarrow}\ v\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ agreeing{\isacharunderscore}status{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ {\isasymlongrightarrow}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymnotin}\ v{\isacharunderscore}set{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ v\ v{\isacharunderscore}set{\isacharprime}\ v{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}v\ {\isasymin}\ v{\isacharunderscore}set{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isakeyword{and}\ a{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\ {\isacharparenleft}{\isasymforall}\ v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ \ v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ {\isasymand}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ l{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ {\isasymand}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}v\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}v\ {\isasymin}\ v{\isacharunderscore}set{\isacartoucheclose}\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\ inspector{\isacharunderscore}imps{\isacharunderscore}everyone{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}v{\isacharprime}\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ l{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ agreeing{\isacharunderscore}validators{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}v{\isacharprime}\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymnotin}\ v{\isacharunderscore}set{\isacartoucheclose}\ {\isacartoucheopen}v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ a{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}\ {\isacharequal}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymnotin}\ v{\isacharunderscore}set{\isacartoucheclose}\ {\isacartoucheopen}v\ {\isasymin}\ v{\isacharunderscore}set{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharcomma}\ lifting{\isacharparenright}\ M{\isacharunderscore}type\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ insert{\isacharunderscore}Diff\ insert{\isacharunderscore}iff\ subsetCE{\isacharparenright}\ \ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}\ {\isacharequal}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ ll{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ calculation{\isacharparenleft}{\isadigit{2}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ v\ {\isasymin}\ V{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ \ state{\isacharunderscore}transition{\isacharunderscore}only{\isacharunderscore}made{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}v\ {\isasymin}\ v{\isacharunderscore}set{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}type\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}of{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validator{\isacharunderscore}is{\isacharunderscore}singleton\ {\isacartoucheopen}v\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isasymsigma}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ calculation{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ insert{\isacharunderscore}subset\ is{\isacharunderscore}singleton{\isacharunderscore}the{\isacharunderscore}elem{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}\ {\isasymin}\ M{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}type\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validator{\isacharunderscore}is{\isacharunderscore}singleton\ {\isacartoucheopen}v{\isacharprime}\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}is{\isacharunderscore}in{\isacharunderscore}the{\isacharunderscore}state\ calculation{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ state{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}M\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ later{\isacharunderscore}disagreeing{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ ll{\isadigit{1}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}v{\isacharprime}\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ l{\isadigit{1}}\ ll{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ blast\ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ later{\isacharunderscore}disagreeing{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\ l{\isadigit{1}}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}v{\isacharprime}\ {\isasymin}\ V\ {\isacharminus}\ {\isacharbraceleft}sender\ m{\isacharbraceright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\ \ \ \ \ \ \ \ \ \isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ inspector{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ meson\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ later{\isacharunderscore}messages{\isacharunderscore}from{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validator{\isacharunderscore}include{\isacharunderscore}all{\isacharunderscore}earlier{\isacharunderscore}messages\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ v\ {\isasymsigma}\ {\isasymsigma}{\isadigit{1}}\ {\isasymsigma}{\isadigit{2}}{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}{\isadigit{1}}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}{\isadigit{1}}\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymand}\ {\isasymsigma}{\isadigit{2}}\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymand}\ {\isasymsigma}{\isadigit{1}}\ {\isasyminter}\ {\isasymsigma}{\isadigit{2}}\ {\isacharequal}\ {\isasymemptyset}\isanewline
\ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isadigit{1}}{\isachardot}\ sender\ m{\isadigit{1}}\ {\isacharequal}\ v\ \isanewline
\ \ \ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isadigit{2}}{\isachardot}\ sender\ m{\isadigit{2}}\ {\isacharequal}\ v\ {\isasymlongrightarrow}\ m{\isadigit{1}}\ {\isasymin}\ justification\ m{\isadigit{2}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ strict{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def{\isacharparenright}\ \ \isanewline
\ \ \isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ new{\isacharunderscore}message{\isacharunderscore}is{\isacharunderscore}L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}sender\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ m\ {\isacharequal}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validator{\isacharunderscore}is{\isacharunderscore}singleton\isanewline
\ \ \isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ new{\isacharunderscore}justification{\isacharunderscore}is{\isacharunderscore}L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}of{\isacharunderscore}sender\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ justification\ m{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ new{\isacharunderscore}message{\isacharunderscore}is{\isacharunderscore}L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}sender\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}def{\isacharparenright}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validator{\isacharunderscore}is{\isacharunderscore}singleton\isanewline
\ \ \isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \ \isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}others{\isacharunderscore}for{\isacharunderscore}sender{\isacharunderscore}is{\isacharunderscore}the{\isacharunderscore}previous{\isacharunderscore}one{\isacharunderscore}or{\isacharunderscore}later{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}\isanewline
\ \ {\isasymlongrightarrow}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}justification\ m{\isacharparenright}\ v{\isacharparenright}\ {\isacharequal}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}\ v{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ {\isasymor}\ justified\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}justification\ m{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ justified{\isacharunderscore}message{\isacharunderscore}exists{\isacharunderscore}in{\isacharunderscore}later{\isacharunderscore}from{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m{\isadigit{1}}\ m{\isadigit{2}}{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ {\isasymsigma}\isanewline
\ \ {\isasymlongrightarrow}\ justified\ m{\isadigit{1}}\ m{\isadigit{2}}\ \isanewline
\ \ {\isasymlongrightarrow}\ m{\isadigit{2}}\ {\isasymin}\ later{\isacharunderscore}from\ {\isacharparenleft}m{\isadigit{1}}{\isacharcomma}\ sender\ m{\isadigit{2}}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ later{\isacharunderscore}from{\isacharunderscore}def\ later{\isacharunderscore}def\ from{\isacharunderscore}sender{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ new{\isacharunderscore}message{\isacharunderscore}see{\isacharunderscore}all{\isacharunderscore}members{\isacharunderscore}agreeing\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymin}\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ justification\ m{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ new{\isacharunderscore}message{\isacharunderscore}from{\isacharunderscore}member{\isacharunderscore}see{\isacharunderscore}itself{\isacharunderscore}agreeing\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymin}\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ justification\ m{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ new{\isacharunderscore}message{\isacharunderscore}see{\isacharunderscore}all{\isacharunderscore}members{\isacharunderscore}agreeing\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}sender{\isacharunderscore}is{\isacharunderscore}previous{\isacharunderscore}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}justification\ m{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isasymsigma}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}sender{\isacharunderscore}justified{\isacharunderscore}by{\isacharunderscore}new{\isacharunderscore}message\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ justified\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isasymsigma}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}\ m{\isachardoublequoteclose}\isanewline
\ \ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ justification{\isacharunderscore}is{\isacharunderscore}total{\isacharunderscore}on{\isacharunderscore}messages{\isacharunderscore}from{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validator\isanewline
\ \ \isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ nothing{\isacharunderscore}later{\isacharunderscore}than{\isacharunderscore}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\isanewline
\ \ {\isasymlongrightarrow}\ v\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isasymsigma}\isanewline
\ \ {\isasymlongrightarrow}\ later{\isacharunderscore}from\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isasymsigma}\ v{\isacharparenright}{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ later{\isacharunderscore}from{\isacharunderscore}def\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}def\ L{\isacharunderscore}M{\isacharunderscore}def\ from{\isacharunderscore}sender{\isacharunderscore}def\ justified{\isacharunderscore}def\ equivocating{\isacharunderscore}validators{\isacharunderscore}def\ is{\isacharunderscore}equivocating{\isacharunderscore}def{\isacharparenright}\ \isanewline
\ \ \isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ later{\isacharunderscore}messages{\isacharunderscore}for{\isacharunderscore}sender{\isacharunderscore}is{\isacharunderscore}only{\isacharunderscore}new{\isacharunderscore}message\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ later{\isacharunderscore}from\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isasymsigma}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharcomma}\ sender\ m{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ \ {\isacharbraceleft}m{\isacharbraceright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ later{\isacharunderscore}disagreeing{\isacharunderscore}is{\isacharunderscore}monotonic{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ v\ {\isasymsigma}\ m{\isadigit{1}}\ m{\isadigit{2}}\ p{\isachardot}\ v\ {\isasymin}\ V\ {\isasymand}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\isanewline
\ \ {\isasymlongrightarrow}\ justified\ m{\isadigit{1}}\ m{\isadigit{2}}\isanewline
\ \ {\isasymlongrightarrow}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ m{\isadigit{2}}{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymsubseteq}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ m{\isadigit{1}}{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}strict{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}the{\isacharunderscore}state\ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid\ M{\isacharunderscore}type\ state{\isacharunderscore}is{\isacharunderscore}in{\isacharunderscore}pow{\isacharunderscore}Mi\ \ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages{\isacharunderscore}def\ later{\isacharunderscore}from{\isacharunderscore}def\ justified{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ previous{\isacharunderscore}empty{\isacharunderscore}later{\isacharunderscore}disagreeing{\isacharunderscore}messages{\isacharunderscore}imps{\isacharunderscore}empty{\isacharunderscore}in{\isacharunderscore}new{\isacharunderscore}message\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v\ {\isasymin}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}\isanewline
\ \ {\isasymlongrightarrow}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}justification\ m{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}{\isacharcomma}\ v{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}message{\isacharunderscore}from{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}member\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ finite\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymin}\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharplus}{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ m\ v{\isacharunderscore}set\ p\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ v{\isacharunderscore}set{\isachardoublequoteclose}\ {\isachardoublequoteopen}majority{\isacharunderscore}driven\ p{\isachardoublequoteclose}\ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}sender\ m\ {\isasymin}\ v{\isacharunderscore}set{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ {\isachardoublequoteopen}sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharcomma}\ lifting{\isacharparenright}\ {\isasymSigma}t{\isacharunderscore}def\ equivocating{\isacharunderscore}validators{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}honest{\isacharunderscore}message\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight{\isacharunderscore}def\ is{\isacharunderscore}faults{\isacharunderscore}lt{\isacharunderscore}threshold{\isacharunderscore}def\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharparenright}\ \ \ \ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}sender\ m\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ inspector{\isacharunderscore}imps{\isacharunderscore}everyone{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators{\isacharunderscore}def\ observed{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\ \ \ \ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ justification\ m{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ new{\isacharunderscore}justification{\isacharunderscore}is{\isacharunderscore}L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}of{\isacharunderscore}sender\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ {\isasymSigma}t{\isacharunderscore}def{\isacharparenright}\ \ \isanewline
\ \ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ \ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ {\isasymlongrightarrow}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymin}\ v{\isacharunderscore}set{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \ \ \isacommand{sorry}\isamarkupfalse%
\isanewline
\ \ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\ v\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}sender\ m\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymlongrightarrow}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ new{\isacharunderscore}message{\isacharunderscore}see{\isacharunderscore}all{\isacharunderscore}members{\isacharunderscore}agreeing\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ Protocol{\isachardot}new{\isacharunderscore}message{\isacharunderscore}see{\isacharunderscore}all{\isacharunderscore}members{\isacharunderscore}agreeing\ Protocol{\isacharunderscore}axioms\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymin}\ v{\isacharunderscore}set{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ justification\ m{\isacartoucheclose}\ subsetCE\ subset{\isacharunderscore}trans{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ inspector{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymforall}v{\isasymin}v{\isacharunderscore}set{\isachardot}\ {\isasymforall}v{\isacharunderscore}set{\isacharprime}{\isachardot}\ \ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\ gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ {\isasymlongrightarrow}\ gt{\isacharunderscore}threshold\ {\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}sender\ m\ {\isasymin}\ v{\isacharunderscore}set{\isacartoucheclose}\ \ {\isacartoucheopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ justification\ m{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ Un{\isacharunderscore}insert{\isacharunderscore}right\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymnotin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacartoucheclose}\ subsetCE\ subset{\isacharunderscore}trans\ sup{\isacharunderscore}bot{\isachardot}right{\isacharunderscore}neutral{\isacharparenright}\ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ V\ {\isasymand}\ finite\ v{\isacharunderscore}set{\isacharprime}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymand}\ gt{\isacharunderscore}threshold{\isacharparenleft}v{\isacharunderscore}set{\isacharprime}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}finite\ v{\isacharunderscore}set{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}{\isasymforall}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymlongrightarrow}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ rev{\isacharunderscore}finite{\isacharunderscore}subset\ subset{\isacharunderscore}trans{\isacharparenright}\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ c\ {\isasymin}\ {\isasymepsilon}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardot}\ p\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ \ {\isacartoucheopen}majority{\isacharunderscore}driven\ p{\isacartoucheclose}\ {\isacartoucheopen}sender\ m\ {\isasymin}\ v{\isacharunderscore}set{\isacartoucheclose}\ gt{\isacharunderscore}threshold{\isacharunderscore}imps{\isacharunderscore}estimator{\isacharunderscore}agreeing\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}sender\ m\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}t{\isacartoucheclose}\ {\isacartoucheopen}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ justification\ m{\isacartoucheclose}\ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ past{\isacharunderscore}state{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}{\isasymSigma}t\ state{\isacharunderscore}transition{\isacharunderscore}is{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ M{\isacharunderscore}type\isanewline
\ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ {\isasymSigma}t{\isacharunderscore}def\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ {\isasymSigma}t{\isacharunderscore}def\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ is{\isacharunderscore}future{\isacharunderscore}state{\isachardot}simps\ subsetD{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ c\ {\isasymin}\ L{\isacharunderscore}H{\isacharunderscore}E\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharparenleft}sender\ m{\isacharparenright}{\isachardot}\ p\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}sender\ m\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}t{\isacartoucheclose}\ L{\isacharunderscore}H{\isacharunderscore}M{\isacharunderscore}of{\isacharunderscore}observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validator{\isacharunderscore}is{\isacharunderscore}singleton\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ L{\isacharunderscore}H{\isacharunderscore}E{\isacharunderscore}def\ L{\isacharunderscore}H{\isacharunderscore}J{\isacharunderscore}def{\isacharparenright}\ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{sorry}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}sender\ m\ {\isasymin}\ observed{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ agreeing{\isacharunderscore}validators{\isacharunderscore}def\ agreeing{\isacharunderscore}def{\isacharparenright}\ \ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ agreeing{\isacharunderscore}status{\isacharunderscore}of{\isacharunderscore}non{\isacharunderscore}sender{\isacharunderscore}not{\isacharunderscore}affected{\isacharunderscore}by{\isacharunderscore}minimal{\isacharunderscore}transitions\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ Diff{\isacharunderscore}iff\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\ contra{\isacharunderscore}subsetD\ empty{\isacharunderscore}iff\ insert{\isacharunderscore}iff\ inspector{\isacharunderscore}imps{\isacharunderscore}everyone{\isacharunderscore}agreeing{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\ \ \ \ \ \ \isanewline
\ \ \isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ v\ {\isasymin}\ v{\isacharunderscore}set{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}\ v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymand}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ v\ v{\isacharunderscore}set{\isacharprime}\ v{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}v\ {\isasymin}\ v{\isacharunderscore}set{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isakeyword{and}\ a{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}v{\isacharunderscore}set{\isacharprime}\ {\isasymsubseteq}\ v{\isacharunderscore}set\ {\isasymand}\ {\isacharparenleft}{\isasymforall}\ v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ \ v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ {\isasymand}\ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isasymsigma}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}v{\isacharprime}\ {\isasymin}\ v{\isacharunderscore}set{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}v{\isacharprime}\ {\isasymin}\ agreeing{\isacharunderscore}validators\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ later{\isacharunderscore}disagreeing{\isacharunderscore}messages\ {\isacharparenleft}p{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}M\ {\isacharparenleft}the{\isacharunderscore}elem\ {\isacharparenleft}L{\isacharunderscore}H{\isacharunderscore}J\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ v{\isacharparenright}{\isacharparenright}\ v{\isacharprime}{\isacharparenright}{\isacharcomma}\ v{\isacharprime}{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{sorry}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ inspector{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ meson\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}message{\isacharunderscore}from{\isacharunderscore}equivocating{\isacharunderscore}member\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ M\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymin}\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ sender\ m\ {\isasymin}\ equivocating{\isacharunderscore}validators\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}t\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{sorry}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ m\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}t\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}message{\isacharunderscore}from{\isacharunderscore}non{\isacharunderscore}member\isanewline
\ \ \ \ \ \ \ \ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}message{\isacharunderscore}from{\isacharunderscore}non{\isacharunderscore}equivocating{\isacharunderscore}member\isanewline
\ \ \ \ \ \ \ \ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}message{\isacharunderscore}from{\isacharunderscore}equivocating{\isacharunderscore}member\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ {\isasymSigma}t{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ V{\isacharunderscore}type\ insert{\isacharunderscore}iff\ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid\ rev{\isacharunderscore}finite{\isacharunderscore}subset{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}presereved{\isacharunderscore}forever\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardot}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharplus}{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ v{\isacharunderscore}set\ p\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}majority{\isacharunderscore}driven\ p{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}{\isasymsigma}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ v{\isacharunderscore}set\ p\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}majority{\isacharunderscore}driven\ p{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymsubset}\ {\isasymsigma}{\isacharprime}\ {\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ futures{\isacharunderscore}def\ psubsetI{\isacharparenright}\ \ \ \ \ \ \isanewline
\ \ \ \ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}majority{\isacharunderscore}driven\ p{\isacartoucheclose}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ state{\isacharunderscore}is{\isacharunderscore}finite\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ intermediate{\isacharunderscore}state{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}towards{\isacharunderscore}strict{\isacharunderscore}future\ \isanewline
\ \ \ \ \ \ \isacommand{sorry}\isamarkupfalse%
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}presereved{\isacharunderscore}forever{\isacharunderscore}by{\isacharunderscore}induction\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardot}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ n{\isachardot}\ {\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ \isanewline
\ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardot}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ n\ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ majority{\isacharunderscore}driven\ p\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}futures\ {\isasymsigma}{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ n\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induction\ n{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ futures{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ state{\isacharunderscore}is{\isacharunderscore}finite\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharplus}{\isacharparenright}\isanewline
\ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\ {\isasymsigma}\ v{\isacharunderscore}set\ p\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ a{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ majority{\isacharunderscore}driven\ p\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}futures\ {\isasymsigma}{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ n\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}majority{\isacharunderscore}driven\ p{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ Suc\ n{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isasymnoteq}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ futures{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ card{\isacharunderscore}Diff{\isacharunderscore}subset\ card{\isacharunderscore}mono\ diff{\isacharunderscore}is{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}eq{\isacharprime}\ finite{\isachardot}emptyI\ nat{\isachardot}simps{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ subsetCE\ subset{\isacharunderscore}empty{\isacharparenright}\ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymsubset}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isacartoucheclose}\ {\isacartoucheopen}card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ Suc\ n{\isacartoucheclose}\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ futures{\isacharunderscore}def\ {\isasymSigma}t{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ force\ \isanewline
\ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ intermediate{\isacharunderscore}state{\isacharunderscore}before{\isacharunderscore}receiving{\isacharunderscore}single{\isacharunderscore}message\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isasymnoteq}\ {\isasymemptyset}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ {\isasymSigma}t{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\ \ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ m\ {\isasymsigma}{\isacharprime}{\isacharprime}\ \isakeyword{where}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ past{\isacharunderscore}state{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}{\isasymSigma}t\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isacartoucheclose}\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ futures{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isasymnoteq}\ {\isasymemptyset}{\isacartoucheclose}\ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def\ insert{\isacharunderscore}Diff{\isacharunderscore}if{\isacharparenright}\ \isanewline
\ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ n{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ Suc\ n{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ Suc{\isacharunderscore}diff{\isacharunderscore}le\ Un{\isacharunderscore}insert{\isacharunderscore}right\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymsubset}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacartoucheclose}\ add{\isacharunderscore}left{\isacharunderscore}cancel\ card{\isachardot}insert\ card{\isacharunderscore}Diff{\isacharunderscore}subset\ card{\isacharunderscore}mono\ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid\ plus{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}eq{\isacharunderscore}Suc\ psubsetE\ state{\isacharunderscore}is{\isacharunderscore}finite\ state{\isacharunderscore}transition{\isacharunderscore}only{\isacharunderscore}made{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ subsetCE\ sup{\isacharunderscore}bot{\isachardot}right{\isacharunderscore}neutral{\isacharparenright}\ \ \ \ \ \ \isanewline
\ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}majority{\isacharunderscore}driven\ p{\isacartoucheclose}\ {\isacartoucheopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}{\isacartoucheclose}\ a{\isadigit{1}}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ p{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ inspector{\isacharunderscore}preserved{\isacharunderscore}over{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isacartoucheclose}\ {\isacartoucheopen}majority{\isacharunderscore}driven\ p{\isacartoucheclose}\ futures{\isacharunderscore}def\isanewline
\ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \ \ \ \isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ inspector{\isacharunderscore}is{\isacharunderscore}safety{\isacharunderscore}oracle\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ v{\isacharunderscore}set\ p{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ v{\isacharunderscore}set\ {\isasymsubseteq}\ V\ \isanewline
\ \ {\isasymlongrightarrow}\ finite\ v{\isacharunderscore}set\isanewline
\ \ {\isasymlongrightarrow}\ majority{\isacharunderscore}driven\ p\isanewline
\ \ {\isasymlongrightarrow}\ inspector\ {\isacharparenleft}v{\isacharunderscore}set{\isacharcomma}\ {\isasymsigma}{\isacharcomma}\ p{\isacharparenright}\isanewline
\ \ {\isasymlongrightarrow}\ state{\isacharunderscore}property{\isacharunderscore}is{\isacharunderscore}decided\ {\isacharparenleft}naturally{\isacharunderscore}corresponding{\isacharunderscore}state{\isacharunderscore}property\ p{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ \ \ \ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ inspector{\isacharunderscore}presereved{\isacharunderscore}forever\ inspector{\isacharunderscore}imps{\isacharunderscore}estimator{\isacharunderscore}agreeing\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ naturally{\isacharunderscore}corresponding{\isacharunderscore}state{\isacharunderscore}property{\isacharunderscore}def\ futures{\isacharunderscore}def\ state{\isacharunderscore}property{\isacharunderscore}is{\isacharunderscore}decided{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ meson%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/work/LayerXcom/cbc-casper-proof/Isabelle/Inspector.thy%:%
%:%10=1%:%
%:%11=1%:%
%:%12=2%:%
%:%13=3%:%
%:%14=4%:%
%:%15=5%:%
%:%20=5%:%
%:%23=6%:%
%:%24=7%:%
%:%25=8%:%
%:%26=9%:%
%:%27=10%:%
%:%28=11%:%
%:%29=12%:%
%:%30=13%:%
%:%31=14%:%
%:%32=15%:%
%:%33=16%:%
%:%34=17%:%
%:%35=18%:%
%:%36=19%:%
%:%37=20%:%
%:%38=21%:%
%:%39=22%:%
%:%40=23%:%
%:%41=24%:%
%:%42=24%:%
%:%43=25%:%
%:%44=26%:%
%:%45=27%:%
%:%46=28%:%
%:%47=29%:%
%:%48=29%:%
%:%49=30%:%
%:%50=31%:%
%:%51=32%:%
%:%52=33%:%
%:%53=33%:%
%:%54=34%:%
%:%57=35%:%
%:%61=35%:%
%:%62=35%:%
%:%63=36%:%
%:%64=36%:%
%:%65=36%:%
%:%70=36%:%
%:%73=37%:%
%:%74=38%:%
%:%75=38%:%
%:%76=39%:%
%:%79=40%:%
%:%83=40%:%
%:%84=40%:%
%:%89=40%:%
%:%92=41%:%
%:%93=42%:%
%:%94=42%:%
%:%95=43%:%
%:%98=44%:%
%:%102=44%:%
%:%103=44%:%
%:%108=44%:%
%:%111=45%:%
%:%112=46%:%
%:%113=46%:%
%:%114=47%:%
%:%117=48%:%
%:%121=48%:%
%:%122=48%:%
%:%123=49%:%
%:%124=50%:%
%:%125=50%:%
%:%130=50%:%
%:%133=51%:%
%:%134=52%:%
%:%135=53%:%
%:%136=53%:%
%:%137=54%:%
%:%138=55%:%
%:%139=56%:%
%:%140=57%:%
%:%141=57%:%
%:%142=58%:%
%:%145=59%:%
%:%149=59%:%
%:%150=59%:%
%:%151=60%:%
%:%152=60%:%
%:%157=60%:%
%:%160=61%:%
%:%161=62%:%
%:%162=62%:%
%:%163=63%:%
%:%166=64%:%
%:%170=64%:%
%:%171=64%:%
%:%172=65%:%
%:%173=65%:%
%:%178=65%:%
%:%181=66%:%
%:%182=67%:%
%:%183=67%:%
%:%184=68%:%
%:%187=69%:%
%:%191=69%:%
%:%192=69%:%
%:%193=69%:%
%:%198=69%:%
%:%201=70%:%
%:%202=71%:%
%:%203=71%:%
%:%204=72%:%
%:%207=73%:%
%:%211=73%:%
%:%212=73%:%
%:%213=74%:%
%:%214=74%:%
%:%215=75%:%
%:%216=75%:%
%:%221=75%:%
%:%224=76%:%
%:%225=77%:%
%:%226=77%:%
%:%227=78%:%
%:%230=79%:%
%:%234=79%:%
%:%235=79%:%
%:%236=80%:%
%:%237=80%:%
%:%238=81%:%
%:%239=81%:%
%:%240=82%:%
%:%241=82%:%
%:%242=83%:%
%:%243=83%:%
%:%248=83%:%
%:%251=84%:%
%:%252=85%:%
%:%253=85%:%
%:%254=86%:%
%:%257=87%:%
%:%261=87%:%
%:%262=87%:%
%:%263=88%:%
%:%264=88%:%
%:%269=88%:%
%:%272=89%:%
%:%273=90%:%
%:%274=91%:%
%:%275=91%:%
%:%276=92%:%
%:%277=93%:%
%:%278=94%:%
%:%279=95%:%
%:%280=96%:%
%:%281=96%:%
%:%282=97%:%
%:%283=98%:%
%:%284=99%:%
%:%285=100%:%
%:%286=101%:%
%:%287=102%:%
%:%288=102%:%
%:%289=103%:%
%:%290=104%:%
%:%291=105%:%
%:%292=106%:%
%:%293=107%:%
%:%294=107%:%
%:%295=108%:%
%:%296=109%:%
%:%298=111%:%
%:%299=112%:%
%:%300=113%:%
%:%301=114%:%
%:%302=114%:%
%:%303=115%:%
%:%304=116%:%
%:%305=117%:%
%:%306=118%:%
%:%307=118%:%
%:%308=119%:%
%:%311=120%:%
%:%315=120%:%
%:%316=120%:%
%:%317=121%:%
%:%318=121%:%
%:%319=121%:%
%:%324=121%:%
%:%327=122%:%
%:%328=123%:%
%:%329=124%:%
%:%330=125%:%
%:%331=126%:%
%:%332=126%:%
%:%333=127%:%
%:%335=129%:%
%:%336=130%:%
%:%339=131%:%
%:%343=131%:%
%:%349=131%:%
%:%352=132%:%
%:%353=133%:%
%:%354=134%:%
%:%355=135%:%
%:%356=135%:%
%:%357=136%:%
%:%358=137%:%
%:%359=138%:%
%:%360=139%:%
%:%361=140%:%
%:%362=141%:%
%:%363=141%:%
%:%364=142%:%
%:%366=144%:%
%:%369=145%:%
%:%373=145%:%
%:%379=145%:%
%:%382=146%:%
%:%383=147%:%
%:%384=147%:%
%:%385=148%:%
%:%386=149%:%
%:%392=155%:%
%:%393=156%:%
%:%394=157%:%
%:%395=157%:%
%:%396=158%:%
%:%398=160%:%
%:%401=161%:%
%:%405=161%:%
%:%411=161%:%
%:%414=162%:%
%:%415=163%:%
%:%416=163%:%
%:%417=164%:%
%:%419=166%:%
%:%422=167%:%
%:%426=167%:%
%:%427=167%:%
%:%428=168%:%
%:%429=168%:%
%:%434=168%:%
%:%437=169%:%
%:%438=170%:%
%:%439=171%:%
%:%440=171%:%
%:%441=172%:%
%:%443=174%:%
%:%446=175%:%
%:%450=175%:%
%:%451=175%:%
%:%452=176%:%
%:%453=176%:%
%:%458=176%:%
%:%461=177%:%
%:%462=178%:%
%:%463=178%:%
%:%464=179%:%
%:%466=181%:%
%:%469=182%:%
%:%473=182%:%
%:%474=182%:%
%:%475=183%:%
%:%476=183%:%
%:%477=184%:%
%:%478=184%:%
%:%479=185%:%
%:%480=185%:%
%:%481=186%:%
%:%482=186%:%
%:%483=187%:%
%:%484=187%:%
%:%485=188%:%
%:%486=188%:%
%:%487=189%:%
%:%488=189%:%
%:%489=190%:%
%:%490=190%:%
%:%491=191%:%
%:%492=191%:%
%:%493=192%:%
%:%494=192%:%
%:%495=193%:%
%:%496=193%:%
%:%497=194%:%
%:%498=194%:%
%:%499=195%:%
%:%500=195%:%
%:%501=195%:%
%:%502=196%:%
%:%503=196%:%
%:%504=197%:%
%:%505=197%:%
%:%506=198%:%
%:%507=198%:%
%:%508=199%:%
%:%509=199%:%
%:%510=200%:%
%:%511=200%:%
%:%512=201%:%
%:%513=202%:%
%:%514=202%:%
%:%515=203%:%
%:%516=203%:%
%:%517=203%:%
%:%518=204%:%
%:%519=204%:%
%:%520=205%:%
%:%521=205%:%
%:%522=206%:%
%:%523=206%:%
%:%524=206%:%
%:%525=207%:%
%:%526=207%:%
%:%527=208%:%
%:%528=208%:%
%:%529=209%:%
%:%530=209%:%
%:%531=210%:%
%:%532=210%:%
%:%533=211%:%
%:%534=211%:%
%:%535=212%:%
%:%541=212%:%
%:%544=213%:%
%:%545=214%:%
%:%546=215%:%
%:%547=215%:%
%:%548=216%:%
%:%553=221%:%
%:%556=222%:%
%:%560=222%:%
%:%561=222%:%
%:%562=223%:%
%:%563=223%:%
%:%564=224%:%
%:%565=224%:%
%:%566=225%:%
%:%567=225%:%
%:%568=226%:%
%:%569=226%:%
%:%570=226%:%
%:%571=227%:%
%:%572=227%:%
%:%573=228%:%
%:%574=229%:%
%:%575=229%:%
%:%576=230%:%
%:%577=230%:%
%:%578=230%:%
%:%579=231%:%
%:%580=231%:%
%:%581=232%:%
%:%582=233%:%
%:%583=233%:%
%:%584=234%:%
%:%585=234%:%
%:%586=234%:%
%:%587=235%:%
%:%588=235%:%
%:%589=236%:%
%:%590=236%:%
%:%591=237%:%
%:%592=237%:%
%:%593=237%:%
%:%594=238%:%
%:%595=238%:%
%:%596=239%:%
%:%597=239%:%
%:%598=239%:%
%:%599=240%:%
%:%600=240%:%
%:%601=241%:%
%:%602=241%:%
%:%603=242%:%
%:%604=242%:%
%:%605=242%:%
%:%606=243%:%
%:%607=243%:%
%:%608=243%:%
%:%609=244%:%
%:%610=244%:%
%:%611=245%:%
%:%612=245%:%
%:%613=246%:%
%:%619=246%:%
%:%622=247%:%
%:%623=248%:%
%:%624=249%:%
%:%625=249%:%
%:%626=250%:%
%:%630=254%:%
%:%633=255%:%
%:%637=255%:%
%:%638=255%:%
%:%643=255%:%
%:%646=256%:%
%:%647=257%:%
%:%648=258%:%
%:%649=259%:%
%:%650=260%:%
%:%651=261%:%
%:%652=262%:%
%:%653=263%:%
%:%654=263%:%
%:%655=264%:%
%:%658=267%:%
%:%661=268%:%
%:%665=268%:%
%:%666=268%:%
%:%667=269%:%
%:%668=269%:%
%:%673=269%:%
%:%676=270%:%
%:%677=271%:%
%:%678=271%:%
%:%679=272%:%
%:%682=275%:%
%:%685=276%:%
%:%689=276%:%
%:%690=276%:%
%:%691=277%:%
%:%692=277%:%
%:%697=277%:%
%:%700=278%:%
%:%701=279%:%
%:%702=280%:%
%:%703=280%:%
%:%704=281%:%
%:%707=284%:%
%:%710=285%:%
%:%714=285%:%
%:%715=285%:%
%:%716=286%:%
%:%717=286%:%
%:%718=287%:%
%:%719=287%:%
%:%720=288%:%
%:%721=288%:%
%:%722=289%:%
%:%723=290%:%
%:%724=291%:%
%:%725=291%:%
%:%726=291%:%
%:%727=292%:%
%:%728=292%:%
%:%729=293%:%
%:%730=293%:%
%:%731=294%:%
%:%732=294%:%
%:%733=295%:%
%:%734=295%:%
%:%735=296%:%
%:%736=296%:%
%:%737=297%:%
%:%738=297%:%
%:%739=298%:%
%:%740=298%:%
%:%741=299%:%
%:%742=299%:%
%:%743=300%:%
%:%744=300%:%
%:%745=301%:%
%:%746=301%:%
%:%747=302%:%
%:%753=302%:%
%:%756=303%:%
%:%757=304%:%
%:%758=305%:%
%:%759=305%:%
%:%760=306%:%
%:%763=309%:%
%:%766=310%:%
%:%770=310%:%
%:%771=310%:%
%:%772=311%:%
%:%773=311%:%
%:%774=312%:%
%:%775=312%:%
%:%776=313%:%
%:%777=313%:%
%:%778=314%:%
%:%779=314%:%
%:%780=315%:%
%:%781=315%:%
%:%782=316%:%
%:%783=316%:%
%:%784=317%:%
%:%785=317%:%
%:%786=317%:%
%:%787=318%:%
%:%788=318%:%
%:%789=319%:%
%:%790=319%:%
%:%791=319%:%
%:%792=320%:%
%:%793=320%:%
%:%794=321%:%
%:%795=321%:%
%:%796=322%:%
%:%797=322%:%
%:%798=322%:%
%:%799=323%:%
%:%800=323%:%
%:%801=324%:%
%:%802=325%:%
%:%803=325%:%
%:%804=326%:%
%:%805=326%:%
%:%806=326%:%
%:%807=327%:%
%:%808=327%:%
%:%809=328%:%
%:%810=328%:%
%:%811=329%:%
%:%812=330%:%
%:%813=331%:%
%:%814=331%:%
%:%815=332%:%
%:%816=332%:%
%:%817=333%:%
%:%823=333%:%
%:%826=334%:%
%:%827=335%:%
%:%828=336%:%
%:%829=336%:%
%:%830=337%:%
%:%833=340%:%
%:%836=341%:%
%:%840=341%:%
%:%841=341%:%
%:%842=342%:%
%:%843=342%:%
%:%844=343%:%
%:%845=344%:%
%:%846=344%:%
%:%851=344%:%
%:%854=345%:%
%:%855=346%:%
%:%856=347%:%
%:%857=347%:%
%:%858=348%:%
%:%861=351%:%
%:%864=352%:%
%:%868=352%:%
%:%869=352%:%
%:%870=353%:%
%:%871=353%:%
%:%872=354%:%
%:%873=354%:%
%:%878=354%:%
%:%881=355%:%
%:%882=356%:%
%:%883=357%:%
%:%884=357%:%
%:%885=358%:%
%:%888=361%:%
%:%891=362%:%
%:%895=362%:%
%:%896=362%:%
%:%897=363%:%
%:%898=363%:%
%:%899=363%:%
%:%904=363%:%
%:%907=364%:%
%:%908=365%:%
%:%909=366%:%
%:%910=367%:%
%:%911=367%:%
%:%912=368%:%
%:%916=372%:%
%:%919=373%:%
%:%923=373%:%
%:%924=373%:%
%:%925=374%:%
%:%926=374%:%
%:%927=375%:%
%:%928=375%:%
%:%929=376%:%
%:%930=376%:%
%:%931=377%:%
%:%932=378%:%
%:%933=378%:%
%:%934=378%:%
%:%935=379%:%
%:%936=379%:%
%:%937=380%:%
%:%938=380%:%
%:%939=381%:%
%:%940=382%:%
%:%941=382%:%
%:%942=382%:%
%:%943=383%:%
%:%944=384%:%
%:%945=384%:%
%:%946=385%:%
%:%947=386%:%
%:%948=386%:%
%:%949=387%:%
%:%950=388%:%
%:%951=388%:%
%:%952=388%:%
%:%959=395%:%
%:%960=396%:%
%:%961=396%:%
%:%962=397%:%
%:%963=397%:%
%:%964=398%:%
%:%965=398%:%
%:%966=399%:%
%:%967=399%:%
%:%968=400%:%
%:%969=401%:%
%:%970=402%:%
%:%971=403%:%
%:%972=403%:%
%:%973=403%:%
%:%974=404%:%
%:%975=404%:%
%:%976=405%:%
%:%977=405%:%
%:%978=406%:%
%:%979=406%:%
%:%980=407%:%
%:%981=407%:%
%:%982=408%:%
%:%983=408%:%
%:%984=409%:%
%:%985=409%:%
%:%986=409%:%
%:%987=410%:%
%:%988=410%:%
%:%989=410%:%
%:%990=411%:%
%:%991=411%:%
%:%992=412%:%
%:%993=412%:%
%:%994=413%:%
%:%995=413%:%
%:%996=413%:%
%:%997=413%:%
%:%998=414%:%
%:%999=414%:%
%:%1000=415%:%
%:%1001=415%:%
%:%1002=416%:%
%:%1003=416%:%
%:%1004=416%:%
%:%1005=416%:%
%:%1006=417%:%
%:%1007=417%:%
%:%1008=418%:%
%:%1009=418%:%
%:%1010=419%:%
%:%1011=419%:%
%:%1012=419%:%
%:%1013=419%:%
%:%1014=420%:%
%:%1015=420%:%
%:%1016=421%:%
%:%1017=421%:%
%:%1018=422%:%
%:%1019=422%:%
%:%1020=423%:%
%:%1021=423%:%
%:%1022=424%:%
%:%1023=424%:%
%:%1024=425%:%
%:%1025=425%:%
%:%1026=426%:%
%:%1027=426%:%
%:%1028=427%:%
%:%1029=427%:%
%:%1030=428%:%
%:%1031=428%:%
%:%1032=429%:%
%:%1033=429%:%
%:%1034=430%:%
%:%1035=430%:%
%:%1036=431%:%
%:%1037=431%:%
%:%1038=431%:%
%:%1039=432%:%
%:%1040=432%:%
%:%1041=433%:%
%:%1042=433%:%
%:%1043=434%:%
%:%1044=435%:%
%:%1045=435%:%
%:%1046=436%:%
%:%1047=436%:%
%:%1048=436%:%
%:%1049=437%:%
%:%1050=437%:%
%:%1051=437%:%
%:%1052=438%:%
%:%1053=438%:%
%:%1054=439%:%
%:%1055=439%:%
%:%1056=439%:%
%:%1057=440%:%
%:%1058=441%:%
%:%1059=441%:%
%:%1060=442%:%
%:%1061=443%:%
%:%1062=443%:%
%:%1063=444%:%
%:%1064=444%:%
%:%1065=445%:%
%:%1066=445%:%
%:%1067=445%:%
%:%1068=446%:%
%:%1069=446%:%
%:%1070=447%:%
%:%1071=447%:%
%:%1072=448%:%
%:%1073=448%:%
%:%1074=449%:%
%:%1080=449%:%
%:%1083=450%:%
%:%1084=451%:%
%:%1085=452%:%
%:%1086=453%:%
%:%1087=454%:%
%:%1088=455%:%
%:%1089=456%:%
%:%1090=457%:%
%:%1091=465%:%
%:%1092=466%:%
%:%1093=467%:%
%:%1094=468%:%
%:%1095=469%:%
%:%1096=470%:%
%:%1097=470%:%
%:%1098=471%:%
%:%1100=473%:%
%:%1103=474%:%
%:%1107=474%:%
%:%1108=474%:%
%:%1109=475%:%
%:%1110=475%:%
%:%1111=476%:%
%:%1117=476%:%
%:%1120=477%:%
%:%1121=478%:%
%:%1122=479%:%
%:%1123=479%:%
%:%1124=480%:%
%:%1127=483%:%
%:%1130=484%:%
%:%1134=484%:%
%:%1135=484%:%
%:%1136=485%:%
%:%1142=485%:%
%:%1145=486%:%
%:%1146=487%:%
%:%1147=487%:%
%:%1148=488%:%
%:%1151=491%:%
%:%1154=492%:%
%:%1158=492%:%
%:%1159=492%:%
%:%1160=493%:%
%:%1161=493%:%
%:%1162=494%:%
%:%1163=494%:%
%:%1164=495%:%
%:%1170=495%:%
%:%1173=496%:%
%:%1174=497%:%
%:%1175=498%:%
%:%1176=500%:%
%:%1177=501%:%
%:%1178=501%:%
%:%1179=502%:%
%:%1184=507%:%
%:%1187=508%:%
%:%1191=508%:%
%:%1197=508%:%
%:%1200=509%:%
%:%1201=510%:%
%:%1202=511%:%
%:%1203=511%:%
%:%1204=512%:%
%:%1206=514%:%
%:%1209=515%:%
%:%1213=515%:%
%:%1214=515%:%
%:%1219=515%:%
%:%1222=516%:%
%:%1223=517%:%
%:%1224=518%:%
%:%1225=519%:%
%:%1226=520%:%
%:%1227=520%:%
%:%1228=521%:%
%:%1233=526%:%
%:%1236=527%:%
%:%1240=527%:%
%:%1246=527%:%
%:%1249=528%:%
%:%1250=529%:%
%:%1251=530%:%
%:%1252=531%:%
%:%1253=532%:%
%:%1254=533%:%
%:%1255=533%:%
%:%1256=534%:%
%:%1261=539%:%
%:%1264=540%:%
%:%1268=540%:%
%:%1269=540%:%
%:%1270=541%:%
%:%1271=541%:%
%:%1276=541%:%
%:%1279=542%:%
%:%1280=543%:%
%:%1281=544%:%
%:%1282=545%:%
%:%1283=546%:%
%:%1284=546%:%
%:%1285=547%:%
%:%1288=550%:%
%:%1291=551%:%
%:%1295=551%:%
%:%1301=551%:%
%:%1304=552%:%
%:%1305=553%:%
%:%1306=554%:%
%:%1307=555%:%
%:%1308=555%:%
%:%1309=556%:%
%:%1312=559%:%
%:%1313=560%:%
%:%1316=561%:%
%:%1320=561%:%
%:%1321=561%:%
%:%1322=562%:%
%:%1328=562%:%
%:%1331=563%:%
%:%1332=564%:%
%:%1333=565%:%
%:%1334=565%:%
%:%1335=566%:%
%:%1337=568%:%
%:%1340=569%:%
%:%1344=569%:%
%:%1345=569%:%
%:%1346=570%:%
%:%1352=570%:%
%:%1355=571%:%
%:%1356=572%:%
%:%1357=573%:%
%:%1358=573%:%
%:%1359=574%:%
%:%1362=577%:%
%:%1365=578%:%
%:%1369=578%:%
%:%1375=578%:%
%:%1378=579%:%
%:%1379=580%:%
%:%1380=581%:%
%:%1381=581%:%
%:%1382=582%:%
%:%1384=584%:%
%:%1387=585%:%
%:%1391=585%:%
%:%1392=585%:%
%:%1393=586%:%
%:%1394=586%:%
%:%1395=587%:%
%:%1396=587%:%
%:%1401=587%:%
%:%1404=588%:%
%:%1405=589%:%
%:%1406=590%:%
%:%1407=590%:%
%:%1408=591%:%
%:%1412=595%:%
%:%1415=596%:%
%:%1419=596%:%
%:%1420=596%:%
%:%1421=597%:%
%:%1427=597%:%
%:%1430=598%:%
%:%1431=599%:%
%:%1432=600%:%
%:%1433=601%:%
%:%1434=601%:%
%:%1435=602%:%
%:%1442=609%:%
%:%1445=610%:%
%:%1449=610%:%
%:%1450=610%:%
%:%1451=611%:%
%:%1452=611%:%
%:%1453=612%:%
%:%1454=612%:%
%:%1455=613%:%
%:%1456=613%:%
%:%1457=614%:%
%:%1458=615%:%
%:%1459=616%:%
%:%1460=616%:%
%:%1461=616%:%
%:%1462=617%:%
%:%1463=617%:%
%:%1464=618%:%
%:%1465=618%:%
%:%1466=618%:%
%:%1467=619%:%
%:%1468=619%:%
%:%1469=620%:%
%:%1470=620%:%
%:%1471=621%:%
%:%1472=621%:%
%:%1473=622%:%
%:%1474=622%:%
%:%1475=622%:%
%:%1476=623%:%
%:%1477=623%:%
%:%1478=624%:%
%:%1479=625%:%
%:%1480=625%:%
%:%1481=626%:%
%:%1482=627%:%
%:%1483=627%:%
%:%1484=627%:%
%:%1485=627%:%
%:%1486=628%:%
%:%1487=629%:%
%:%1488=629%:%
%:%1489=630%:%
%:%1490=631%:%
%:%1491=631%:%
%:%1492=632%:%
%:%1493=633%:%
%:%1494=633%:%
%:%1495=633%:%
%:%1496=633%:%
%:%1497=634%:%
%:%1498=634%:%
%:%1499=635%:%
%:%1500=635%:%
%:%1501=636%:%
%:%1502=636%:%
%:%1503=637%:%
%:%1504=637%:%
%:%1505=638%:%
%:%1506=638%:%
%:%1507=639%:%
%:%1508=639%:%
%:%1509=640%:%
%:%1510=640%:%
%:%1511=641%:%
%:%1512=641%:%
%:%1513=642%:%
%:%1514=642%:%
%:%1515=643%:%
%:%1516=643%:%
%:%1517=644%:%
%:%1518=645%:%
%:%1519=645%:%
%:%1520=646%:%
%:%1521=646%:%
%:%1522=646%:%
%:%1523=647%:%
%:%1524=648%:%
%:%1525=648%:%
%:%1526=649%:%
%:%1527=649%:%
%:%1528=650%:%
%:%1529=650%:%
%:%1530=650%:%
%:%1531=651%:%
%:%1532=651%:%
%:%1533=652%:%
%:%1534=653%:%
%:%1535=654%:%
%:%1536=654%:%
%:%1537=655%:%
%:%1538=655%:%
%:%1539=656%:%
%:%1540=656%:%
%:%1541=656%:%
%:%1542=657%:%
%:%1543=657%:%
%:%1544=658%:%
%:%1545=658%:%
%:%1546=659%:%
%:%1547=659%:%
%:%1548=660%:%
%:%1549=660%:%
%:%1550=660%:%
%:%1551=661%:%
%:%1552=661%:%
%:%1553=662%:%
%:%1554=662%:%
%:%1555=663%:%
%:%1556=663%:%
%:%1557=664%:%
%:%1558=664%:%
%:%1559=664%:%
%:%1560=665%:%
%:%1561=665%:%
%:%1562=666%:%
%:%1563=666%:%
%:%1564=667%:%
%:%1565=667%:%
%:%1566=668%:%
%:%1567=669%:%
%:%1568=669%:%
%:%1569=669%:%
%:%1576=676%:%
%:%1577=677%:%
%:%1578=677%:%
%:%1579=678%:%
%:%1580=678%:%
%:%1581=679%:%
%:%1582=679%:%
%:%1583=680%:%
%:%1584=680%:%
%:%1585=681%:%
%:%1586=682%:%
%:%1587=683%:%
%:%1588=684%:%
%:%1589=684%:%
%:%1590=685%:%
%:%1591=686%:%
%:%1592=686%:%
%:%1593=687%:%
%:%1594=687%:%
%:%1595=688%:%
%:%1596=688%:%
%:%1597=688%:%
%:%1598=689%:%
%:%1599=689%:%
%:%1600=690%:%
%:%1601=690%:%
%:%1602=691%:%
%:%1603=691%:%
%:%1604=692%:%
%:%1610=692%:%
%:%1613=693%:%
%:%1614=694%:%
%:%1615=695%:%
%:%1616=696%:%
%:%1617=697%:%
%:%1618=698%:%
%:%1619=699%:%
%:%1620=700%:%
%:%1621=700%:%
%:%1622=701%:%
%:%1629=708%:%
%:%1630=709%:%
%:%1633=710%:%
%:%1637=710%:%
%:%1643=710%:%
%:%1646=711%:%
%:%1647=712%:%
%:%1648=713%:%
%:%1649=714%:%
%:%1650=714%:%
%:%1651=715%:%
%:%1656=720%:%
%:%1659=721%:%
%:%1663=721%:%
%:%1664=721%:%
%:%1665=722%:%
%:%1666=723%:%
%:%1667=724%:%
%:%1668=724%:%
%:%1669=725%:%
%:%1670=725%:%
%:%1675=725%:%
%:%1678=726%:%
%:%1679=727%:%
%:%1680=728%:%
%:%1681=728%:%
%:%1682=729%:%
%:%1685=732%:%
%:%1688=733%:%
%:%1692=733%:%
%:%1693=733%:%
%:%1694=734%:%
%:%1695=734%:%
%:%1696=735%:%
%:%1697=735%:%
%:%1698=736%:%
%:%1699=736%:%
%:%1700=737%:%
%:%1701=737%:%
%:%1702=737%:%
%:%1703=738%:%
%:%1704=738%:%
%:%1705=739%:%
%:%1706=739%:%
%:%1707=740%:%
%:%1708=740%:%
%:%1709=741%:%
%:%1710=741%:%
%:%1711=742%:%
%:%1712=742%:%
%:%1713=743%:%
%:%1714=743%:%
%:%1715=743%:%
%:%1716=744%:%
%:%1717=744%:%
%:%1718=751%:%
%:%1719=752%:%
%:%1720=752%:%
%:%1721=752%:%
%:%1722=753%:%
%:%1723=753%:%
%:%1724=754%:%
%:%1725=754%:%
%:%1726=755%:%
%:%1727=756%:%
%:%1728=756%:%
%:%1729=757%:%
%:%1730=757%:%
%:%1731=758%:%
%:%1737=758%:%
%:%1740=759%:%
%:%1741=760%:%
%:%1742=760%:%
%:%1743=761%:%
%:%1746=764%:%
%:%1753=765%:%
%:%1754=765%:%
%:%1755=766%:%
%:%1756=766%:%
%:%1759=769%:%
%:%1760=770%:%
%:%1761=770%:%
%:%1762=771%:%
%:%1763=771%:%
%:%1764=772%:%
%:%1765=772%:%
%:%1766=773%:%
%:%1767=773%:%
%:%1772=778%:%
%:%1773=779%:%
%:%1774=779%:%
%:%1775=780%:%
%:%1776=780%:%
%:%1777=781%:%
%:%1778=781%:%
%:%1779=781%:%
%:%1780=782%:%
%:%1781=782%:%
%:%1782=783%:%
%:%1783=783%:%
%:%1784=784%:%
%:%1785=784%:%
%:%1786=785%:%
%:%1787=785%:%
%:%1793=791%:%
%:%1794=792%:%
%:%1795=793%:%
%:%1796=794%:%
%:%1797=795%:%
%:%1798=796%:%
%:%1799=797%:%
%:%1800=797%:%
%:%1801=797%:%
%:%1802=798%:%
%:%1803=798%:%
%:%1804=799%:%
%:%1805=799%:%
%:%1806=800%:%
%:%1807=800%:%
%:%1808=801%:%
%:%1809=801%:%
%:%1810=802%:%
%:%1811=802%:%
%:%1812=803%:%
%:%1813=803%:%
%:%1814=804%:%
%:%1815=804%:%
%:%1816=804%:%
%:%1817=805%:%
%:%1818=805%:%
%:%1819=806%:%
%:%1820=806%:%
%:%1821=807%:%
%:%1822=807%:%
%:%1823=808%:%
%:%1824=808%:%
%:%1825=808%:%
%:%1826=809%:%
%:%1827=809%:%
%:%1828=810%:%
%:%1829=810%:%
%:%1830=810%:%
%:%1831=811%:%
%:%1832=811%:%
%:%1833=812%:%
%:%1834=812%:%
%:%1835=813%:%
%:%1836=813%:%
%:%1837=814%:%
%:%1838=814%:%
%:%1839=815%:%
%:%1840=815%:%
%:%1841=816%:%
%:%1842=816%:%
%:%1843=817%:%
%:%1844=817%:%
%:%1845=817%:%
%:%1846=818%:%
%:%1847=818%:%
%:%1848=819%:%
%:%1849=819%:%
%:%1850=820%:%
%:%1851=820%:%
%:%1852=820%:%
%:%1853=821%:%
%:%1854=821%:%
%:%1855=822%:%
%:%1856=823%:%
%:%1857=823%:%
%:%1858=824%:%
%:%1859=824%:%
%:%1860=824%:%
%:%1861=825%:%
%:%1862=825%:%
%:%1863=826%:%
%:%1864=827%:%
%:%1865=828%:%
%:%1866=828%:%
%:%1867=829%:%
%:%1868=829%:%
%:%1869=830%:%
%:%1870=830%:%
%:%1871=831%:%
%:%1872=831%:%
%:%1873=831%:%
%:%1874=832%:%
%:%1875=832%:%
%:%1876=833%:%
%:%1882=833%:%
%:%1885=834%:%
%:%1886=835%:%
%:%1887=836%:%
%:%1888=836%:%
%:%1889=837%:%
%:%1893=841%:%
%:%1896=842%:%
%:%1900=842%:%
%:%1901=842%:%
%:%1902=843%:%
%:%1903=843%:%
%:%1904=844%:%
%:%1905=844%:%
%:%1910=844%:%
%:%1915=845%:%
%:%1920=846%:%