%
\begin{isabellebody}%
\setisabellecontext{StateTransition}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ StateTransition\isanewline
\isanewline
\isakeyword{imports}\ Main\ CBCCasper\ MessageJustification\isanewline
\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ state{\isacharunderscore}transition\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}state\ rel{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}state{\isacharunderscore}transition\ {\isacharequal}\ {\isacharbraceleft}{\isacharparenleft}{\isasymsigma}{\isadigit{1}}{\isacharcomma}\ {\isasymsigma}{\isadigit{2}}{\isacharparenright}{\isachardot}\ {\isacharbraceleft}{\isasymsigma}{\isadigit{1}}{\isacharcomma}\ {\isasymsigma}{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state{\isacharparenleft}{\isasymsigma}{\isadigit{1}}{\isacharcomma}\ {\isasymsigma}{\isadigit{2}}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\ \isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ reflexivity{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}transition\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}refl{\isacharunderscore}on\ {\isasymSigma}\ state{\isacharunderscore}transition{\isachardoublequoteclose}\ \ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ state{\isacharunderscore}transition{\isacharunderscore}def\ refl{\isacharunderscore}on{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ transitivity{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}transition\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}trans\ state{\isacharunderscore}transition{\isachardoublequoteclose}\ \ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ state{\isacharunderscore}transition{\isacharunderscore}def\ trans{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ state{\isacharunderscore}transition{\isacharunderscore}is{\isacharunderscore}preorder\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}preorder{\isacharunderscore}on\ {\isasymSigma}\ state{\isacharunderscore}transition{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ preorder{\isacharunderscore}on{\isacharunderscore}def\ reflexivity{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}transition\ transitivity{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}transition{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ antisymmetry{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}transition\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}antisym\ state{\isacharunderscore}transition{\isachardoublequoteclose}\ \ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ state{\isacharunderscore}transition{\isacharunderscore}def\ antisym{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ state{\isacharunderscore}transition{\isacharunderscore}is{\isacharunderscore}partial{\isacharunderscore}order\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}partial{\isacharunderscore}order{\isacharunderscore}on\ {\isasymSigma}\ state{\isacharunderscore}transition{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ partial{\isacharunderscore}order{\isacharunderscore}on{\isacharunderscore}def\ state{\isacharunderscore}transition{\isacharunderscore}is{\isacharunderscore}preorder\ antisymmetry{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}transition{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ immediately{\isacharunderscore}next{\isacharunderscore}message\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharequal}\ {\isacharparenleft}{\isasymlambda}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardot}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymand}\ m\ {\isasymnotin}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}of{\isacharunderscore}same{\isacharunderscore}depth{\isacharunderscore}non{\isacharunderscore}zero{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}n{\isasymge}{\isadigit{1}}{\isachardot}\ {\isasymforall}{\isasymsigma}{\isasymin}{\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isachardot}\ {\isasymforall}m{\isasymin}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}m{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n{\isacharplus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
{\isacharminus}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ n\ {\isasymsigma}\ m\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isadigit{1}}\ {\isasymle}\ n{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isasymin}\ Mi\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isachardoublequoteclose}\ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}n{\isacharprime}{\isachardot}\ n\ {\isacharequal}\ Suc\ n{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isadigit{1}}\ {\isasymle}\ n{\isacartoucheclose}\ old{\isachardot}nat{\isachardot}exhaust\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ si{\isacharcolon}\ {\isachardoublequoteopen}{\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n\ {\isacharequal}\ {\isacharbraceleft}{\isasymsigma}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n\ {\isacharminus}\ {\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isachardot}\ finite\ {\isasymsigma}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}\ m{\isachardot}\ m\ {\isasymin}\ {\isasymsigma}\ {\isasymlongrightarrow}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isasymsigma}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isacharparenright}{\isachardot}\ finite\ {\isasymsigma}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}\ m{\isachardot}\ m\ {\isasymin}\ {\isasymsigma}\ {\isasymlongrightarrow}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharcomma}\ lifting{\isacharparenright}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ case{\isacharunderscore}prod{\isacharunderscore}conv{\isacharparenright}\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}justification\ m\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}m{\isacharprime}{\isachardot}\ finite\ {\isasymsigma}\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isasymLongrightarrow}\ justification\ m{\isacharprime}\ {\isasymsubseteq}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isacartoucheclose}\ si\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
{\isachardoublequoteopen}{\isasymAnd}m{\isacharprime}{\isachardot}\ finite\ {\isasymsigma}\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isasymLongrightarrow}\ justification\ m{\isacharprime}\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}m{\isacharprime}{\isachardot}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymLongrightarrow}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}m\ {\isasymin}\ Mi\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n{\isacharminus}{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isacartoucheclose}\ si\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Mi{\isacharunderscore}monotonic\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}full{\isacharunderscore}types{\isacharparenright}\ PowD\ PowI\ Suc{\isacharunderscore}eq{\isacharunderscore}plus{\isadigit{1}}\ {\isacartoucheopen}{\isasymexists}n{\isacharprime}{\isachardot}\ n\ {\isacharequal}\ Suc\ n{\isacharprime}{\isacartoucheclose}\ diff{\isacharunderscore}Suc{\isacharunderscore}{\isadigit{1}}\ subset{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n\ {\isacharplus}\ {\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymAnd}m{\isacharprime}{\isachardot}\ finite\ {\isasymsigma}\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isasymLongrightarrow}\ justification\ m{\isacharprime}\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}justification\ m\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacartoucheclose}\ \isanewline
\ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isacartoucheclose}\ si\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}of{\isacharunderscore}same{\isacharunderscore}depth{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isasymin}{\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isachardot}\ {\isasymforall}m{\isasymin}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}m{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n{\isacharplus}{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ n{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}of{\isacharunderscore}same{\isacharunderscore}depth{\isacharunderscore}non{\isacharunderscore}zero\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ le{\isacharunderscore}add{\isadigit{1}}\ plus{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}eq{\isacharunderscore}Suc{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Params{\isacharparenright}\ past{\isacharunderscore}state{\isacharunderscore}exists{\isacharunderscore}in{\isacharunderscore}same{\isacharunderscore}depth\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\ \isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ n{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isadigit{0}}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}{\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymLongrightarrow}\ n\ {\isacharequal}\ {\isadigit{0}}\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Suc\ nat{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}{\isasymsigma}\ {\isasymsigma}{\isacharprime}\ nat{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymLongrightarrow}\ n\ {\isacharequal}\ Suc\ nat\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}n\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Suc{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isasymsigma}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}\ m{\isachardot}\ m\ {\isasymin}\ {\isasymsigma}\ {\isasymlongrightarrow}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ state{\isacharunderscore}is{\isacharunderscore}finite\ state{\isacharunderscore}is{\isacharunderscore}in{\isacharunderscore}pow{\isacharunderscore}Mi\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n\ {\isacharminus}\ {\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ Pow{\isacharunderscore}iff\ Suc{\isacharunderscore}eq{\isacharunderscore}plus{\isadigit{1}}\ {\isasymSigma}i{\isacharunderscore}monotonic\ {\isasymSigma}i{\isacharunderscore}subset{\isacharunderscore}Mi\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isacartoucheclose}\ add{\isacharunderscore}diff{\isacharunderscore}cancel{\isacharunderscore}left{\isacharprime}\ add{\isacharunderscore}eq{\isacharunderscore}if\ diff{\isacharunderscore}is{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}eq\ diff{\isacharunderscore}le{\isacharunderscore}self\ plus{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}eq{\isacharunderscore}Suc\ subset{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isacharbraceleft}{\isasymsigma}\ {\isasymin}\ Pow\ {\isacharparenleft}Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n\ {\isacharminus}\ {\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isachardot}\ finite\ {\isasymsigma}\ {\isasymand}\ {\isacharparenleft}{\isasymforall}\ m{\isachardot}\ m\ {\isasymin}\ {\isasymsigma}\ {\isasymlongrightarrow}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ n{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Suc{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}exists{\isacharunderscore}in{\isacharunderscore}same{\isacharunderscore}depth{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ m\ {\isasymin}\ M{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}m{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ n\ {\isasymin}\ {\isasymnat}{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n\ {\isasymand}\ m\ {\isasymin}\ Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def\ M{\isacharunderscore}def\ {\isasymSigma}{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ past{\isacharunderscore}state{\isacharunderscore}exists{\isacharunderscore}in{\isacharunderscore}same{\isacharunderscore}depth\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isasymSigma}i{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}\ m\ {\isasymin}\ M{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}m{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ m\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}m\ {\isasymin}\ M{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymexists}\ n\ {\isasymin}\ {\isasymnat}{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n\ {\isasymand}\ m\ {\isasymin}\ Mi\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ n{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}exists{\isacharunderscore}in{\isacharunderscore}same{\isacharunderscore}depth\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}m\ {\isasymin}\ M{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ n\ {\isasymin}\ {\isasymnat}{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}C{\isacharcomma}{\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n\ {\isacharplus}\ {\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}of{\isacharunderscore}same{\isacharunderscore}depth\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ {\isasymSigma}{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Nats{\isacharunderscore}{\isadigit{1}}\ Nats{\isacharunderscore}add\ Un{\isacharunderscore}insert{\isacharunderscore}right\ {\isacartoucheopen}{\isasymexists}n{\isasymin}{\isasymnat}{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}i\ {\isacharparenleft}V{\isacharcomma}\ C{\isacharcomma}\ {\isasymepsilon}{\isacharparenright}\ {\isacharparenleft}n\ {\isacharplus}\ {\isadigit{1}}{\isacharparenright}{\isacartoucheclose}\ sup{\isacharunderscore}bot{\isachardot}right{\isacharunderscore}neutral{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ state{\isacharunderscore}transition{\isacharunderscore}imps{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}\ m\ {\isasymin}\ M{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymnotin}\ {\isasymsigma}\ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}m{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}\ m\ {\isasymin}\ M{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymforall}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isachardot}\ justification\ m{\isacharprime}\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}is{\isacharunderscore}in{\isacharunderscore}pow{\isacharunderscore}Mi\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}\ m\ {\isasymin}\ M{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ {\isasymlongrightarrow}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}\ m\ {\isasymin}\ M{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymnotin}\ {\isasymsigma}\ {\isasymlongrightarrow}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ justification{\isacharunderscore}implies{\isacharunderscore}different{\isacharunderscore}messages\ justified{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ state{\isacharunderscore}transition{\isacharunderscore}only{\isacharunderscore}made{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ m\ {\isasymin}\ M{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ m\ {\isasymnotin}\ {\isasymsigma}\ {\isasymlongleftrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}transition{\isacharunderscore}imps{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ state{\isacharunderscore}transition{\isacharunderscore}is{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ m\ {\isasymin}\ M{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ \ {\isasymlongleftrightarrow}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}transition{\isacharunderscore}only{\isacharunderscore}made{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def{\isacharparenright}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ insert{\isacharunderscore}Diff\ state{\isacharunderscore}is{\isacharunderscore}in{\isacharunderscore}pow{\isacharunderscore}Mi\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ strict{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymsubset}\ {\isasymsigma}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymsubset}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ ccontr{\isacharparenright}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymnot}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymexists}\ m{\isacharprime}\ {\isasymin}\ justification\ m{\isachardot}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymnot}\ {\isacharparenleft}{\isasymexists}m{\isasymin}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ justification\ m\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacartoucheclose}\ state{\isacharunderscore}is{\isacharunderscore}in{\isacharunderscore}pow{\isacharunderscore}Mi\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymsubset}\ {\isasymsigma}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}iff\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ subset{\isacharunderscore}eq{\isacharparenright}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymexists}\ m{\isacharprime}{\isachardot}\ justified\ m{\isacharprime}\ m\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ justified{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymexists}\ m{\isacharprime}{\isachardot}\ justified\ m{\isacharprime}\ m\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ m\ {\isasymnoteq}\ m{\isacharprime}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ justification{\isacharunderscore}implies{\isacharunderscore}different{\isacharunderscore}messages\ \ state{\isacharunderscore}difference{\isacharunderscore}is{\isacharunderscore}valid{\isacharunderscore}message\isanewline
\ \ \ \ \ \ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid\ \ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymsubset}\ {\isasymsigma}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ DiffD{\isadigit{1}}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}\ {\isasymsubseteq}\ M{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymsubset}\ {\isasymsigma}{\isacartoucheclose}\ state{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}M\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m{\isacharunderscore}min\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymforall}\ m{\isachardot}\ justified\ m\ m{\isacharunderscore}min\ {\isasymlongrightarrow}\ m\ {\isasymnotin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ subset{\isacharunderscore}of{\isacharunderscore}M{\isacharunderscore}have{\isacharunderscore}minimal{\isacharunderscore}of{\isacharunderscore}justification\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymsubset}\ {\isasymsigma}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymforall}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymexists}\ m{\isacharprime}{\isachardot}\ justified\ m{\isacharprime}\ m\ {\isasymand}\ m{\isacharprime}\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ intermediate{\isacharunderscore}state{\isacharunderscore}towards{\isacharunderscore}strict{\isacharunderscore}future{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardot}\ {\isasymsigma}\ {\isasymsubset}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}t{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymsubset}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ strict{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages\isanewline
\ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymsubset}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ futures{\isacharunderscore}def\ {\isasymSigma}t{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}transition{\isacharunderscore}only{\isacharunderscore}made{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isacartoucheclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ DiffD{\isadigit{1}}\ {\isasymSigma}t{\isacharunderscore}is{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}{\isasymSigma}\ futures{\isacharunderscore}def\ mem{\isacharunderscore}Collect{\isacharunderscore}eq\ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid\ subsetCE{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymsubset}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \ \ \ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardot}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}t{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ equivocation{\isacharunderscore}fault{\isacharunderscore}weight{\isacharunderscore}is{\isacharunderscore}monotonic\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isacartoucheclose}\ \ \ \ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ futures{\isacharunderscore}def\ {\isasymSigma}t{\isacharunderscore}def\ is{\isacharunderscore}faults{\isacharunderscore}lt{\isacharunderscore}threshold{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ fastforce\ \ \ \isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ intermediate{\isacharunderscore}state{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}towards{\isacharunderscore}strict{\isacharunderscore}future{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardot}\ {\isasymsigma}\ {\isasymsubset}\ {\isasymsigma}{\isacharprime}\ \isanewline
\ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}\ {\isasymand}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ intermediate{\isacharunderscore}state{\isacharunderscore}towards{\isacharunderscore}strict{\isacharunderscore}future\isanewline
\ \ \ \ \ \ \ \ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid\ state{\isacharunderscore}transition{\isacharunderscore}imps{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ {\isasymSigma}t{\isacharunderscore}def\ futures{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ DiffE{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ state{\isacharunderscore}differences{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages{\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}{\isasymin}\ {\isasymSigma}{\isachardot}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymand}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ strict{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ psubsetI{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ union{\isacharunderscore}of{\isacharunderscore}two{\isacharunderscore}states{\isacharunderscore}is{\isacharunderscore}state\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isadigit{1}}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isadigit{2}}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isadigit{1}}\ {\isasymunion}\ {\isasymsigma}{\isadigit{2}}{\isacharparenright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}{\isadigit{1}}\ {\isasymsigma}{\isadigit{2}}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isadigit{1}}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}{\isadigit{2}}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isadigit{1}}\ {\isasymunion}\ {\isasymsigma}{\isadigit{2}}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}{\isasymsigma}{\isadigit{1}}\ {\isasymsubseteq}\ {\isasymsigma}{\isadigit{2}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ Un{\isacharunderscore}absorb{\isadigit{1}}\ {\isacartoucheopen}{\isasymsigma}{\isadigit{2}}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymnot}\ {\isasymsigma}{\isadigit{1}}\ {\isasymsubseteq}\ {\isasymsigma}{\isadigit{2}}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}\ {\isasyminter}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharparenleft}{\isasymsigma}\ {\isasyminter}\ {\isasymsigma}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Int{\isacharunderscore}subset{\isacharunderscore}iff\ psubsetI\ strict{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages\ subsetI{\isacharparenright}\ \ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}\ {\isasyminter}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardot}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharcomma}\ m{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\ \ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ DiffD{\isadigit{1}}\ DiffD{\isadigit{2}}\ DiffI\ IntI\ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid{\isacharparenright}\ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ \ {\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isachargreater}\ {\isadigit{0}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ Diff{\isacharunderscore}eq{\isacharunderscore}empty{\isacharunderscore}iff\ card{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}eq\ finite{\isacharunderscore}Diff\ gr{\isadigit{0}}I\ state{\isacharunderscore}is{\isacharunderscore}finite{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ n{\isachardot}\ {\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isasymlongrightarrow}\ \ {\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\isanewline
\ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induction\ n{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ {\isadigit{0}}\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ is{\isacharunderscore}singleton{\isacharunderscore}altdef{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}the{\isacharunderscore}elem\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacharbraceright}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Un{\isacharunderscore}commute\ {\isacartoucheopen}{\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ {\isadigit{0}}\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacartoucheclose}\ is{\isacharunderscore}singleton{\isacharunderscore}the{\isacharunderscore}elem\ singletonD{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Un{\isacharunderscore}Diff{\isacharunderscore}cancel{\isadigit{2}}\ {\isacartoucheopen}is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacartoucheclose}\ is{\isacharunderscore}singleton{\isacharunderscore}the{\isacharunderscore}elem{\isacharparenright}\ \ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}n{\isachardot}\ {\isasymforall}{\isasymsigma}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymLongrightarrow}\ {\isasymforall}{\isasymsigma}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ {\isacharparenleft}Suc\ n{\isacharparenright}\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ {\isacharparenleft}Suc\ n{\isacharparenright}\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ {\isacharparenleft}Suc\ n{\isacharparenright}\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacartoucheclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}eq{\isacharunderscore}empty{\isacharunderscore}iff\ Diff{\isacharunderscore}insert\ Un{\isacharunderscore}insert{\isacharunderscore}right\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ add{\isacharunderscore}diff{\isacharunderscore}cancel{\isacharunderscore}left{\isacharprime}\ card{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}eq\ card{\isacharunderscore}Suc{\isacharunderscore}Diff{\isadigit{1}}\ finite{\isacharunderscore}Diff\ nat{\isachardot}simps{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ plus{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}eq{\isacharunderscore}Suc\ state{\isacharunderscore}is{\isacharunderscore}finite\ sup{\isacharunderscore}bot{\isachardot}right{\isacharunderscore}neutral{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ {\isacharparenleft}Suc\ n{\isacharparenright}\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymforall}\ m\ {\isasymin}\ {\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymand}\ Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymforall}{\isasymsigma}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymand}\ Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}smt\ Un{\isacharunderscore}Diff{\isacharunderscore}cancel\ Un{\isacharunderscore}commute\ Un{\isacharunderscore}insert{\isacharunderscore}right\ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ insert{\isacharunderscore}absorb{\isadigit{2}}\ mk{\isacharunderscore}disjoint{\isacharunderscore}insert\ sup{\isacharunderscore}bot{\isachardot}right{\isacharunderscore}neutral{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ {\isacartoucheopen}{\isasymforall}{\isasymsigma}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymforall}{\isasymsigma}{\isacharprime}{\isasymin}{\isasymSigma}{\isachardot}\ {\isasymnot}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}m{\isasymin}{\isasymsigma}\ {\isacharminus}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacharparenright}{\isacartoucheclose}\ card{\isacharunderscore}Suc{\isacharunderscore}Diff{\isadigit{1}}\ finite{\isacharunderscore}Diff\ state{\isacharunderscore}is{\isacharunderscore}finite{\isacharparenright}\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ False\ {\isacartoucheopen}{\isasymsigma}{\isadigit{1}}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isadigit{2}}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ union{\isacharunderscore}of{\isacharunderscore}finite{\isacharunderscore}set{\isacharunderscore}of{\isacharunderscore}states{\isacharunderscore}is{\isacharunderscore}state\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isacharunderscore}set\ {\isasymsubseteq}\ {\isasymSigma}{\isachardot}\ finite\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ {\isasymUnion}\ {\isasymsigma}{\isacharunderscore}set\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ n{\isachardot}\ {\isasymforall}\ {\isasymsigma}{\isacharunderscore}set\ {\isasymsubseteq}\ {\isasymSigma}{\isachardot}\ n\ {\isacharequal}\ card\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ finite\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ {\isasymUnion}\ {\isasymsigma}{\isacharunderscore}set\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}{\isacharunderscore}set\ {\isasymsubseteq}\ {\isasymSigma}{\isachardot}\ n\ {\isacharequal}\ card\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ finite\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ {\isasymUnion}{\isasymsigma}{\isacharunderscore}set\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induction\ n{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ empty{\isacharunderscore}set{\isacharunderscore}exists{\isacharunderscore}in{\isacharunderscore}{\isasymSigma}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\ {\isasymsigma}{\isacharunderscore}set\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}{\isasymsigma}{\isacharunderscore}set{\isasymsubseteq}{\isasymSigma}{\isachardot}\ n\ {\isacharequal}\ card\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ finite\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ {\isasymUnion}{\isasymsigma}{\isacharunderscore}set\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharunderscore}set\ {\isasymsubseteq}\ {\isasymSigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}Suc\ n\ {\isacharequal}\ card\ {\isasymsigma}{\isacharunderscore}set{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}finite\ {\isasymsigma}{\isacharunderscore}set{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymsigma}{\isacharunderscore}set{\isachardot}\ {\isasymsigma}{\isacharunderscore}set\ {\isacharminus}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasymsubseteq}\ {\isasymSigma}\ {\isasymand}\ {\isasymUnion}\ {\isacharparenleft}{\isasymsigma}{\isacharunderscore}set\ {\isacharminus}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}{\isacharunderscore}set\ {\isasymsubseteq}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}Suc\ n\ {\isacharequal}\ card\ {\isasymsigma}{\isacharunderscore}set{\isacartoucheclose}\ {\isacartoucheopen}{\isasymforall}{\isasymsigma}{\isacharunderscore}set{\isasymsubseteq}{\isasymSigma}{\isachardot}\ n\ {\isacharequal}\ card\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ finite\ {\isasymsigma}{\isacharunderscore}set\ {\isasymlongrightarrow}\ {\isasymUnion}{\isasymsigma}{\isacharunderscore}set\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}mono{\isacharunderscore}tags{\isacharcomma}\ lifting{\isacharparenright}\ Suc{\isacharunderscore}inject\ card{\isachardot}remove\ finite{\isacharunderscore}Diff\ insert{\isacharunderscore}Diff\ insert{\isacharunderscore}subset{\isacharparenright}\ \ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymin}\ {\isasymsigma}{\isacharunderscore}set{\isachardot}\ {\isasymsigma}{\isacharunderscore}set\ {\isacharminus}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}\ {\isasymsubseteq}\ {\isasymSigma}\ {\isasymand}\ {\isasymUnion}\ {\isacharparenleft}{\isasymsigma}{\isacharunderscore}set\ {\isacharminus}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}{\isacharparenright}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymUnion}\ {\isacharparenleft}{\isasymsigma}{\isacharunderscore}set\ {\isacharminus}\ {\isacharbraceleft}{\isasymsigma}{\isacharbraceright}{\isacharparenright}\ {\isasymunion}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ union{\isacharunderscore}of{\isacharunderscore}two{\isacharunderscore}states{\isacharunderscore}is{\isacharunderscore}state\ {\isacartoucheopen}{\isasymsigma}{\isacharunderscore}set\ {\isasymsubseteq}\ {\isasymSigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymUnion}{\isasymsigma}{\isacharunderscore}set\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Sup{\isacharunderscore}bot{\isacharunderscore}conv{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ Sup{\isacharunderscore}insert\ Un{\isacharunderscore}commute\ empty{\isacharunderscore}set{\isacharunderscore}exists{\isacharunderscore}in{\isacharunderscore}{\isasymSigma}\ insert{\isacharunderscore}Diff{\isacharparenright}\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}\ {\isasymAnd}{\isasymsigma}{\isacharunderscore}set{\isachardot}\ {\isasymsigma}{\isacharunderscore}set\ {\isasymsubseteq}\ {\isasymSigma}\ {\isasymLongrightarrow}\ finite\ {\isasymsigma}{\isacharunderscore}set\ {\isasymLongrightarrow}\ {\isasymUnion}{\isasymsigma}{\isacharunderscore}set\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{inductive}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ MessagePath\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}state\ {\isasymRightarrow}\ state\ {\isasymRightarrow}\ message\ list\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ P{\isacharunderscore}nil{\isacharcolon}\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ P{\isacharunderscore}cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacharsemicolon}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacharsemicolon}\ MessagePath\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isasymsigma}{\isacharprime}\ list\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ {\isacharparenleft}m\ {\isacharhash}\ list{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ exist{\isacharunderscore}message{\isacharunderscore}path{\isacharunderscore}nonnil{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{obtains}\ message{\isacharunderscore}list\ \isakeyword{where}\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
{\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isasymsigma}\ {\isasymand}\ finite\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ futures{\isacharunderscore}def\ {\isasymSigma}t{\isacharunderscore}def\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ rev{\isacharunderscore}finite{\isacharunderscore}subset\ state{\isacharunderscore}is{\isacharunderscore}finite\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ d\ \isakeyword{where}\ {\isachardoublequoteopen}d\ {\isacharequal}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ d{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ {\isacartoucheopen}d\ {\isacharequal}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacartoucheclose}\ {\isacartoucheopen}finite\ {\isasymsigma}\ {\isasymand}\ finite\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}{\isacharparenright}\isanewline
\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}message{\isacharunderscore}list{\isachardot}\ MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list\ {\isasymLongrightarrow}\ thesis{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \isacommand{{\isacharbraceleft}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymlbrakk}\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacharsemicolon}\ finite\ {\isasymsigma}{\isacharsemicolon}\ finite\ {\isasymsigma}{\isacharprime}{\isacharsemicolon}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharsemicolon}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacharsemicolon}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isacharsemicolon}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymexists}message{\isacharunderscore}list{\isachardot}\ MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list\ {\isasymand}\ length\ message{\isacharunderscore}list\ {\isacharequal}\ n{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ n\ arbitrary{\isacharcolon}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ d{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharparenright}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ n\ \isakeyword{and}\ {\isasymsigma}\ {\isacharcolon}{\isacharcolon}\ state\ \isakeyword{and}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}{\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\isanewline
\ \ \ \ \ \ \ \ \ \ \ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ finite\ {\isasymsigma}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ finite\ {\isasymsigma}{\isacharprime}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}\ {\isasymLongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymLongrightarrow}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}\ {\isasymLongrightarrow}\ {\isasymexists}message{\isacharunderscore}list{\isachardot}\ MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list\ {\isasymand}\ length\ message{\isacharunderscore}list\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ {\isasymsigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ m\ \isakeyword{where}\ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}differences{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ {\isacartoucheopen}{\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ psubsetI\ strict{\isacharunderscore}subset{\isacharunderscore}of{\isacharunderscore}state{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ cardn{\isacharcolon}\ {\isachardoublequoteopen}card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ n{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}finite\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ {\isacartoucheopen}m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}finite\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ {\isacartoucheopen}finite\ {\isasymsigma}{\isacartoucheclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacartoucheclose}\ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid\ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ {\isacartoucheopen}m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}m\ {\isasymnotin}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}m\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ message{\isacharunderscore}list\ \isakeyword{where}\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list\ {\isasymand}\ length\ message{\isacharunderscore}list\ {\isacharequal}\ Suc\ n{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ True\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}message{\isacharunderscore}list{\isachardot}\ MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list\ {\isasymand}\ length\ message{\isacharunderscore}list\ {\isacharequal}\ Suc\ n\ {\isasymLongrightarrow}\ thesis{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isacharequal}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ True\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}\ {\isacharequal}\ {\isadigit{0}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ card{\isacharunderscore}empty{\isacharparenright}\isanewline
\ \ \ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}n\ {\isacharequal}\ {\isadigit{0}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ cardn\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ {\isacharbrackleft}m{\isacharbrackright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}cons\ True\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}nil\ {\isacartoucheopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}length\ {\isacharbrackleft}m{\isacharbrackright}\ {\isacharequal}\ Suc\ {\isadigit{0}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ {\isacharbrackleft}m{\isacharbrackright}{\isacartoucheclose}\ {\isacartoucheopen}length\ {\isacharbrackleft}m{\isacharbrackright}\ {\isacharequal}\ Suc\ {\isadigit{0}}{\isacartoucheclose}\ {\isacartoucheopen}n\ {\isacharequal}\ {\isadigit{0}}{\isacartoucheclose}\ that\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymAnd}message{\isacharunderscore}list{\isachardot}\ MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list\ {\isasymand}\ length\ message{\isacharunderscore}list\ {\isacharequal}\ Suc\ n\ {\isasymLongrightarrow}\ thesis{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ prev{\isacharunderscore}list\ \isakeyword{where}\ {\isachardoublequoteopen}MessagePath\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isasymsigma}{\isacharprime}\ prev{\isacharunderscore}list\ {\isasymand}\ length\ prev{\isacharunderscore}list\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ False\ {\isacartoucheopen}{\isasymAnd}{\isasymsigma}{\isacharprime}\ {\isasymsigma}{\isachardot}\ {\isasymlbrakk}n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacharsemicolon}\ finite\ {\isasymsigma}{\isacharsemicolon}\ finite\ {\isasymsigma}{\isacharprime}{\isacharsemicolon}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharsemicolon}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isacharsemicolon}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isacharsemicolon}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymexists}message{\isacharunderscore}list{\isachardot}\ MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list\ {\isasymand}\ length\ message{\isacharunderscore}list\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}finite\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}finite\ {\isasymsigma}{\isacharprime}{\isacartoucheclose}\ cardn\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ {\isacharparenleft}m\ {\isacharhash}\ prev{\isacharunderscore}list{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}cons\ {\isacartoucheopen}MessagePath\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isasymsigma}{\isacharprime}\ prev{\isacharunderscore}list\ {\isasymand}\ length\ prev{\isacharunderscore}list\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}MessagePath\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isasymsigma}{\isacharprime}\ prev{\isacharunderscore}list\ {\isasymand}\ length\ prev{\isacharunderscore}list\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\ cardn\ length{\isacharunderscore}Suc{\isacharunderscore}conv\ that\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}message{\isacharunderscore}list{\isachardot}\ MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list\ {\isasymand}\ length\ message{\isacharunderscore}list\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}Suc\ n\ {\isacharequal}\ card\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{{\isacharbraceright}}\isamarkupfalse%
\isanewline
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Params{\isachardot}state{\isacharunderscore}is{\isacharunderscore}finite\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ futures{\isacharunderscore}def\ that\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ coherent{\isacharunderscore}nonnil{\isacharunderscore}message{\isacharunderscore}path{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list{\isachardoublequoteclose}\ {\isachardoublequoteopen}length\ message{\isacharunderscore}list\ {\isasymnoteq}\ {\isadigit{0}}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{obtains}\ m\ ms\ \isakeyword{where}\ {\isachardoublequoteopen}message{\isacharunderscore}list\ {\isacharequal}\ m\ {\isacharhash}\ ms{\isachardoublequoteclose}\ {\isachardoublequoteopen}MessagePath\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}{\isacharparenright}\ {\isasymsigma}{\isacharprime}\ ms{\isachardoublequoteclose}\ {\isachardoublequoteopen}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}m{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ MessagePath{\isachardot}cases{\isacharparenright}\isanewline
\ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ coherent{\isacharunderscore}nil{\isacharunderscore}message{\isacharunderscore}path{\isacharcolon}\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ {\isacharbrackleft}{\isacharbrackright}\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ MessagePath{\isachardot}cases\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ coherent{\isacharunderscore}message{\isacharunderscore}path{\isacharunderscore}inclusive{\isacharcolon}\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ ms\ {\isasymLongrightarrow}\ {\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}\ MessagePath{\isachardot}induct{\isacharcomma}\ auto{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ exist{\isacharunderscore}message{\isacharunderscore}path{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ futures\ {\isasymsigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{obtains}\ message{\isacharunderscore}list\ \isakeyword{where}\ {\isachardoublequoteopen}MessagePath\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\ message{\isacharunderscore}list{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}nil\ Protocol{\isachardot}exist{\isacharunderscore}message{\isacharunderscore}path{\isacharunderscore}nonnil\ Protocol{\isacharunderscore}axioms\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ minimal{\isacharunderscore}transitions\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}state\ {\isacharasterisk}\ state{\isacharparenright}\ set{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}minimal{\isacharunderscore}transitions\ {\isasymequiv}\ {\isacharbraceleft}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isacharbar}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}t\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymand}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\isasymnexists}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacharparenright}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymand}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymand}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ non{\isacharunderscore}empty{\isacharunderscore}non{\isacharunderscore}singleton{\isacharunderscore}imps{\isacharunderscore}two{\isacharunderscore}elements\ {\isacharcolon}\ \isanewline
\ \ {\isachardoublequoteopen}A\ {\isasymnoteq}\ {\isasymemptyset}\ {\isasymLongrightarrow}\ {\isasymnot}\ is{\isacharunderscore}singleton\ A\ {\isasymLongrightarrow}\ {\isasymexists}\ a{\isadigit{1}}\ a{\isadigit{2}}{\isachardot}\ a{\isadigit{1}}\ {\isasymnoteq}\ a{\isadigit{2}}\ {\isasymand}\ {\isacharbraceleft}a{\isadigit{1}}{\isacharcomma}\ a{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ A{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ inf{\isachardot}orderI\ inf{\isacharunderscore}bot{\isacharunderscore}left\ insert{\isacharunderscore}subset\ is{\isacharunderscore}singletonI{\isacharprime}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ minimal{\isacharunderscore}transition{\isacharunderscore}implies{\isacharunderscore}recieving{\isacharunderscore}single{\isacharunderscore}message\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ \ {\isasymlongrightarrow}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ ccontr{\isacharparenright}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymnot}\ {\isacharparenleft}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymlongrightarrow}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ \ {\isachardoublequoteopen}{\isasymexists}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ \ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymnexists}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacharparenright}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymand}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymand}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ minimal{\isacharunderscore}transitions{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}\isanewline
\ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m{\isadigit{1}}\ m{\isadigit{2}}{\isachardot}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\ \isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymemptyset}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ minimal{\isacharunderscore}transitions{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ minimal{\isacharunderscore}transitions{\isacharunderscore}def\ {\isasymSigma}t{\isacharunderscore}def{\isacharparenright}\ \ \ \ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymsubseteq}\ M{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}difference{\isacharunderscore}is{\isacharunderscore}valid{\isacharunderscore}message\ \isacommand{by}\isamarkupfalse%
\ auto\ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}m{\isadigit{1}}\ m{\isadigit{2}}{\isachardot}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ non{\isacharunderscore}empty{\isacharunderscore}non{\isacharunderscore}singleton{\isacharunderscore}imps{\isacharunderscore}two{\isacharunderscore}elements\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isacartoucheopen}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\ \ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymemptyset}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}full{\isacharunderscore}types{\isacharparenright}\ contra{\isacharunderscore}subsetD\ insert{\isacharunderscore}subset\ subsetI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}m{\isadigit{1}}\ m{\isadigit{2}}{\isachardot}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ state{\isacharunderscore}differences{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}iff\ {\isacartoucheopen}{\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacartoucheclose}\ insert{\isacharunderscore}subset\ message{\isacharunderscore}in{\isacharunderscore}state{\isacharunderscore}is{\isacharunderscore}valid{\isacharparenright}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\ \ \ \ \ \ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}\ {\isasymlongrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\isasymexists}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacharparenright}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymand}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymand}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}\ m{\isadigit{1}}\ m{\isadigit{2}}{\isachardot}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}\isanewline
\ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}\ m{\isadigit{1}}\ m{\isadigit{2}}{\isachardot}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isadigit{1}}{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ m{\isadigit{1}}\ m{\isadigit{2}}\ \isakeyword{where}\ {\isachardoublequoteopen}{\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isadigit{1}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ {\isasymsigma}{\isacharprime}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ minimal{\isacharunderscore}transitions{\isacharunderscore}def\ {\isasymSigma}t{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isadigit{1}}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ state{\isacharunderscore}transition{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharbraceright}{\isacharparenright}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharbraceright}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymand}\ {\isasymnot}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}{\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isadigit{1}}{\isacharparenright}{\isacartoucheclose}\ minimal{\isacharunderscore}transitions{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharbraceright}\ {\isasymand}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharbraceright}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isacharbraceleft}m{\isadigit{1}}{\isacharcomma}\ m{\isadigit{2}}{\isacharbraceright}\ {\isasymsubseteq}\ M\ {\isasymand}\ m{\isadigit{1}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{2}}\ {\isasymin}\ {\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}\ {\isasymand}\ m{\isadigit{1}}\ {\isasymnoteq}\ m{\isadigit{2}}\ {\isasymand}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ m{\isadigit{1}}{\isacharparenright}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}\ {\isasymexists}{\isasymsigma}{\isacharprime}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacharparenright}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymand}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymand}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\ \ \ \ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharbraceright}\ {\isasymin}\ {\isasymSigma}{\isacartoucheclose}\ {\isacartoucheopen}is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharbraceright}{\isacharparenright}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}m{\isadigit{1}}{\isacharbraceright}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacartoucheclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \ \ \ \ \ \isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymforall}{\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymnexists}{\isasymsigma}{\isacharprime}{\isacharprime}{\isachardot}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymin}\ {\isasymSigma}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharprime}{\isacharparenright}\ {\isasymand}\ is{\isacharunderscore}future{\isacharunderscore}state\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharprime}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymand}\ {\isasymsigma}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymand}\ {\isasymsigma}{\isacharprime}{\isacharprime}\ {\isasymnoteq}\ {\isasymsigma}{\isacharprime}{\isacharparenright}{\isacartoucheclose}\ {\isacartoucheopen}{\isasymnot}\ {\isacharparenleft}{\isasymforall}{\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymlongrightarrow}\ is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}{\isacartoucheclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ minimal{\isacharunderscore}transitions{\isacharunderscore}reconstruction\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ \ {\isasymlongrightarrow}\ {\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}the{\isacharunderscore}elem\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharcomma}\ rule{\isacharcomma}\ rule{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}\isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions{\isachardoublequoteclose}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ \ minimal{\isacharunderscore}transitions{\isacharunderscore}def\ minimal{\isacharunderscore}transition{\isacharunderscore}implies{\isacharunderscore}recieving{\isacharunderscore}single{\isacharunderscore}message\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymsubseteq}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions{\isacartoucheclose}\ minimal{\isacharunderscore}transitions{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymsigma}\ {\isasymunion}\ {\isacharbraceleft}the{\isacharunderscore}elem\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacharbraceright}\ {\isacharequal}\ {\isasymsigma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ Diff{\isacharunderscore}partition\ {\isacartoucheopen}is{\isacharunderscore}singleton\ {\isacharparenleft}{\isasymsigma}{\isacharprime}\ {\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacartoucheclose}\ is{\isacharunderscore}singleton{\isacharunderscore}the{\isacharunderscore}elem{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}\isakeyword{in}\ Protocol{\isacharparenright}\ minimal{\isacharunderscore}transition{\isacharunderscore}is{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymlongleftrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}\ {\isasymsigma}\ {\isasymsigma}{\isacharprime}{\isachardot}\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ {\isasymsigma}{\isacharprime}{\isacharparenright}\ {\isasymin}\ minimal{\isacharunderscore}transitions\ {\isasymlongrightarrow}\ immediately{\isacharunderscore}next{\isacharunderscore}message\ {\isacharparenleft}{\isasymsigma}{\isacharcomma}\ the{\isacharunderscore}elem\ {\isacharparenleft}{\isasymsigma}{\isacharprime}{\isacharminus}\ {\isasymsigma}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ minimal{\isacharunderscore}transition{\isacharunderscore}implies{\isacharunderscore}recieving{\isacharunderscore}single{\isacharunderscore}message\ state{\isacharunderscore}transition{\isacharunderscore}only{\isacharunderscore}made{\isacharunderscore}by{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}message\isanewline
\ \ \ \ \ \ \ \ \ \ state{\isacharunderscore}differences{\isacharunderscore}have{\isacharunderscore}immediately{\isacharunderscore}next{\isacharunderscore}messages\isanewline
\ \ \ \ \ \ \ \ \ \ state{\isacharunderscore}difference{\isacharunderscore}is{\isacharunderscore}valid{\isacharunderscore}message\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ minimal{\isacharunderscore}transitions{\isacharunderscore}def\ immediately{\isacharunderscore}next{\isacharunderscore}message{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isanewline
\isacommand{oops}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\ \ \ \ \isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/work/blockchain/LayerXcom/cbc-casper-proof/Isabelle/StateTransition.thy%:%
%:%10=1%:%
%:%11=1%:%
%:%12=2%:%
%:%13=3%:%
%:%14=4%:%
%:%15=5%:%
%:%20=5%:%
%:%23=6%:%
%:%24=7%:%
%:%25=8%:%
%:%26=9%:%
%:%27=10%:%
%:%28=11%:%
%:%29=11%:%
%:%30=12%:%
%:%31=13%:%
%:%32=14%:%
%:%33=15%:%
%:%34=15%:%
%:%35=16%:%
%:%38=17%:%
%:%42=17%:%
%:%43=17%:%
%:%44=18%:%
%:%45=18%:%
%:%50=18%:%
%:%53=19%:%
%:%54=20%:%
%:%55=20%:%
%:%56=21%:%
%:%59=22%:%
%:%63=22%:%
%:%64=22%:%
%:%65=23%:%
%:%66=23%:%
%:%71=23%:%
%:%74=24%:%
%:%75=25%:%
%:%76=25%:%
%:%77=26%:%
%:%80=27%:%
%:%84=27%:%
%:%85=27%:%
%:%90=27%:%
%:%93=28%:%
%:%94=29%:%
%:%95=29%:%
%:%96=30%:%
%:%99=31%:%
%:%103=31%:%
%:%104=31%:%
%:%105=32%:%
%:%106=32%:%
%:%111=32%:%
%:%114=33%:%
%:%115=34%:%
%:%116=34%:%
%:%117=35%:%
%:%120=36%:%
%:%124=36%:%
%:%125=36%:%
%:%130=36%:%
%:%133=37%:%
%:%134=39%:%
%:%135=40%:%
%:%136=40%:%
%:%137=41%:%
%:%138=42%:%
%:%139=43%:%
%:%140=43%:%
%:%141=44%:%
%:%144=45%:%
%:%148=45%:%
%:%149=45%:%
%:%150=46%:%
%:%151=46%:%
%:%152=47%:%
%:%153=47%:%
%:%154=48%:%
%:%155=48%:%
%:%156=49%:%
%:%157=50%:%
%:%158=50%:%
%:%159=51%:%
%:%160=51%:%
%:%161=51%:%
%:%162=52%:%
%:%163=52%:%
%:%164=53%:%
%:%165=53%:%
%:%166=54%:%
%:%167=55%:%
%:%168=55%:%
%:%169=56%:%
%:%170=56%:%
%:%171=57%:%
%:%172=58%:%
%:%173=58%:%
%:%174=59%:%
%:%175=59%:%
%:%176=60%:%
%:%177=60%:%
%:%178=61%:%
%:%179=61%:%
%:%180=62%:%
%:%181=62%:%
%:%182=63%:%
%:%183=63%:%
%:%184=63%:%
%:%185=64%:%
%:%186=64%:%
%:%187=64%:%
%:%188=65%:%
%:%189=65%:%
%:%190=66%:%
%:%191=66%:%
%:%192=67%:%
%:%193=67%:%
%:%194=67%:%
%:%195=68%:%
%:%196=68%:%
%:%197=68%:%
%:%198=69%:%
%:%199=70%:%
%:%200=70%:%
%:%201=71%:%
%:%202=71%:%
%:%203=71%:%
%:%204=72%:%
%:%205=72%:%
%:%206=72%:%
%:%207=73%:%
%:%208=73%:%
%:%209=73%:%
%:%210=74%:%
%:%211=74%:%
%:%212=75%:%
%:%213=75%:%
%:%214=76%:%
%:%215=76%:%
%:%216=77%:%
%:%217=77%:%
%:%218=77%:%
%:%219=78%:%
%:%220=78%:%
%:%221=79%:%
%:%222=80%:%
%:%223=80%:%
%:%224=81%:%
%:%225=81%:%
%:%226=82%:%
%:%227=82%:%
%:%228=83%:%
%:%234=83%:%
%:%237=84%:%
%:%238=85%:%
%:%239=85%:%
%:%240=86%:%
%:%243=87%:%
%:%247=87%:%
%:%248=87%:%
%:%249=88%:%
%:%250=88%:%
%:%251=89%:%
%:%252=89%:%
%:%253=90%:%
%:%254=90%:%
%:%259=90%:%
%:%262=91%:%
%:%263=92%:%
%:%264=92%:%
%:%265=93%:%
%:%268=94%:%
%:%272=94%:%
%:%273=94%:%
%:%274=95%:%
%:%275=95%:%
%:%276=96%:%
%:%277=96%:%
%:%278=97%:%
%:%279=97%:%
%:%280=98%:%
%:%281=98%:%
%:%282=99%:%
%:%283=99%:%
%:%284=100%:%
%:%285=100%:%
%:%286=101%:%
%:%287=101%:%
%:%288=102%:%
%:%289=102%:%
%:%290=103%:%
%:%291=103%:%
%:%292=104%:%
%:%293=104%:%
%:%294=105%:%
%:%295=106%:%
%:%296=107%:%
%:%297=107%:%
%:%298=108%:%
%:%299=108%:%
%:%300=109%:%
%:%301=109%:%
%:%302=110%:%
%:%303=110%:%
%:%304=110%:%
%:%305=111%:%
%:%306=111%:%
%:%307=111%:%
%:%308=112%:%
%:%309=112%:%
%:%310=113%:%
%:%311=113%:%
%:%312=114%:%
%:%313=114%:%
%:%314=114%:%
%:%315=115%:%
%:%316=115%:%
%:%317=116%:%
%:%318=116%:%
%:%319=116%:%
%:%320=117%:%
%:%321=117%:%
%:%322=118%:%
%:%323=118%:%
%:%324=119%:%
%:%330=119%:%
%:%333=120%:%
%:%334=121%:%
%:%335=121%:%
%:%336=122%:%
%:%339=123%:%
%:%343=123%:%
%:%344=123%:%
%:%345=124%:%
%:%346=124%:%
%:%347=125%:%
%:%348=125%:%
%:%349=125%:%
%:%354=125%:%
%:%357=126%:%
%:%358=127%:%
%:%359=127%:%
%:%360=128%:%
%:%363=129%:%
%:%367=129%:%
%:%368=129%:%
%:%369=130%:%
%:%370=130%:%
%:%371=131%:%
%:%372=131%:%
%:%373=132%:%
%:%374=132%:%
%:%375=133%:%
%:%376=134%:%
%:%377=135%:%
%:%378=135%:%
%:%379=135%:%
%:%380=136%:%
%:%381=136%:%
%:%382=137%:%
%:%383=137%:%
%:%384=138%:%
%:%385=138%:%
%:%386=138%:%
%:%387=139%:%
%:%388=139%:%
%:%389=140%:%
%:%390=140%:%
%:%391=140%:%
%:%392=141%:%
%:%393=141%:%
%:%394=142%:%
%:%395=142%:%
%:%396=143%:%
%:%397=143%:%
%:%398=144%:%
%:%404=144%:%
%:%407=145%:%
%:%408=146%:%
%:%409=146%:%
%:%410=147%:%
%:%417=148%:%
%:%418=148%:%
%:%419=149%:%
%:%420=149%:%
%:%421=150%:%
%:%422=150%:%
%:%423=150%:%
%:%424=151%:%
%:%425=151%:%
%:%426=151%:%
%:%427=152%:%
%:%428=152%:%
%:%429=153%:%
%:%430=153%:%
%:%431=153%:%
%:%432=154%:%
%:%433=154%:%
%:%434=154%:%
%:%435=155%:%
%:%436=155%:%
%:%437=155%:%
%:%438=156%:%
%:%439=156%:%
%:%440=157%:%
%:%446=157%:%
%:%449=158%:%
%:%450=159%:%
%:%451=159%:%
%:%452=160%:%
%:%455=161%:%
%:%459=161%:%
%:%460=161%:%
%:%461=162%:%
%:%462=162%:%
%:%463=163%:%
%:%464=163%:%
%:%469=163%:%
%:%472=164%:%
%:%473=165%:%
%:%474=165%:%
%:%475=166%:%
%:%478=167%:%
%:%482=167%:%
%:%483=167%:%
%:%484=168%:%
%:%485=168%:%
%:%486=169%:%
%:%487=169%:%
%:%488=169%:%
%:%493=169%:%
%:%496=170%:%
%:%497=171%:%
%:%498=172%:%
%:%499=172%:%
%:%500=173%:%
%:%503=174%:%
%:%507=174%:%
%:%508=174%:%
%:%509=175%:%
%:%510=175%:%
%:%511=176%:%
%:%512=176%:%
%:%513=177%:%
%:%514=177%:%
%:%515=178%:%
%:%516=178%:%
%:%517=179%:%
%:%518=179%:%
%:%519=180%:%
%:%520=180%:%
%:%521=181%:%
%:%522=181%:%
%:%523=182%:%
%:%524=182%:%
%:%525=183%:%
%:%526=183%:%
%:%527=183%:%
%:%528=184%:%
%:%529=184%:%
%:%530=185%:%
%:%531=185%:%
%:%532=186%:%
%:%533=186%:%
%:%534=186%:%
%:%535=187%:%
%:%536=187%:%
%:%537=187%:%
%:%538=188%:%
%:%539=188%:%
%:%540=188%:%
%:%541=189%:%
%:%542=189%:%
%:%543=190%:%
%:%544=191%:%
%:%545=191%:%
%:%546=192%:%
%:%547=192%:%
%:%548=193%:%
%:%549=193%:%
%:%550=193%:%
%:%551=194%:%
%:%552=194%:%
%:%553=194%:%
%:%554=195%:%
%:%555=195%:%
%:%556=196%:%
%:%557=196%:%
%:%558=197%:%
%:%559=197%:%
%:%560=197%:%
%:%561=198%:%
%:%562=198%:%
%:%563=198%:%
%:%564=199%:%
%:%565=199%:%
%:%566=200%:%
%:%572=200%:%
%:%575=201%:%
%:%576=202%:%
%:%577=202%:%
%:%578=203%:%
%:%581=204%:%
%:%585=204%:%
%:%586=204%:%
%:%587=205%:%
%:%588=205%:%
%:%589=206%:%
%:%590=206%:%
%:%591=207%:%
%:%592=207%:%
%:%593=208%:%
%:%594=208%:%
%:%595=209%:%
%:%596=209%:%
%:%597=210%:%
%:%598=210%:%
%:%599=211%:%
%:%600=211%:%
%:%601=212%:%
%:%602=213%:%
%:%603=213%:%
%:%604=214%:%
%:%605=214%:%
%:%606=214%:%
%:%607=215%:%
%:%608=215%:%
%:%609=216%:%
%:%610=216%:%
%:%611=217%:%
%:%612=217%:%
%:%613=217%:%
%:%614=218%:%
%:%615=218%:%
%:%616=218%:%
%:%617=219%:%
%:%618=219%:%
%:%619=219%:%
%:%620=220%:%
%:%621=220%:%
%:%622=221%:%
%:%623=221%:%
%:%624=222%:%
%:%625=222%:%
%:%626=223%:%
%:%632=223%:%
%:%635=224%:%
%:%636=225%:%
%:%637=225%:%
%:%638=226%:%
%:%639=227%:%
%:%642=228%:%
%:%646=228%:%
%:%647=228%:%
%:%648=229%:%
%:%649=230%:%
%:%650=230%:%
%:%651=231%:%
%:%652=231%:%
%:%657=231%:%
%:%660=232%:%
%:%661=233%:%
%:%662=233%:%
%:%663=234%:%
%:%666=235%:%
%:%670=235%:%
%:%671=235%:%
%:%672=236%:%
%:%673=236%:%
%:%678=236%:%
%:%681=237%:%
%:%682=238%:%
%:%683=239%:%
%:%684=240%:%
%:%685=241%:%
%:%686=242%:%
%:%687=242%:%
%:%688=243%:%
%:%691=244%:%
%:%695=244%:%
%:%696=244%:%
%:%697=245%:%
%:%698=245%:%
%:%699=246%:%
%:%700=246%:%
%:%701=247%:%
%:%702=247%:%
%:%703=248%:%
%:%704=248%:%
%:%705=249%:%
%:%706=249%:%
%:%707=250%:%
%:%708=250%:%
%:%709=251%:%
%:%710=251%:%
%:%711=251%:%
%:%712=252%:%
%:%713=252%:%
%:%714=253%:%
%:%715=253%:%
%:%716=254%:%
%:%717=254%:%
%:%718=255%:%
%:%719=255%:%
%:%720=255%:%
%:%721=255%:%
%:%722=256%:%
%:%723=256%:%
%:%724=257%:%
%:%725=257%:%
%:%726=258%:%
%:%727=258%:%
%:%728=258%:%
%:%729=259%:%
%:%730=259%:%
%:%731=260%:%
%:%732=260%:%
%:%733=261%:%
%:%734=261%:%
%:%735=261%:%
%:%736=262%:%
%:%737=262%:%
%:%738=263%:%
%:%739=263%:%
%:%740=264%:%
%:%741=264%:%
%:%742=265%:%
%:%743=265%:%
%:%744=266%:%
%:%745=266%:%
%:%746=267%:%
%:%747=267%:%
%:%748=268%:%
%:%749=268%:%
%:%750=269%:%
%:%751=269%:%
%:%752=270%:%
%:%753=270%:%
%:%754=271%:%
%:%755=271%:%
%:%756=272%:%
%:%757=272%:%
%:%758=273%:%
%:%759=273%:%
%:%760=274%:%
%:%761=274%:%
%:%762=275%:%
%:%763=275%:%
%:%764=276%:%
%:%765=276%:%
%:%766=277%:%
%:%767=277%:%
%:%768=278%:%
%:%769=278%:%
%:%770=278%:%
%:%771=279%:%
%:%772=279%:%
%:%773=280%:%
%:%774=280%:%
%:%775=280%:%
%:%776=281%:%
%:%777=281%:%
%:%778=282%:%
%:%779=282%:%
%:%780=283%:%
%:%781=283%:%
%:%782=283%:%
%:%783=284%:%
%:%784=284%:%
%:%785=285%:%
%:%786=285%:%
%:%787=286%:%
%:%788=286%:%
%:%789=287%:%
%:%790=287%:%
%:%791=288%:%
%:%792=288%:%
%:%793=289%:%
%:%794=289%:%
%:%795=290%:%
%:%796=290%:%
%:%797=291%:%
%:%798=291%:%
%:%799=292%:%
%:%800=292%:%
%:%801=293%:%
%:%802=293%:%
%:%803=294%:%
%:%804=294%:%
%:%805=295%:%
%:%806=295%:%
%:%807=296%:%
%:%808=296%:%
%:%809=297%:%
%:%810=297%:%
%:%811=297%:%
%:%812=298%:%
%:%813=298%:%
%:%814=299%:%
%:%815=299%:%
%:%816=300%:%
%:%817=300%:%
%:%818=300%:%
%:%819=301%:%
%:%820=301%:%
%:%821=302%:%
%:%822=302%:%
%:%823=303%:%
%:%824=303%:%
%:%825=304%:%
%:%826=304%:%
%:%827=305%:%
%:%828=305%:%
%:%829=306%:%
%:%830=306%:%
%:%831=306%:%
%:%832=307%:%
%:%833=307%:%
%:%834=308%:%
%:%835=308%:%
%:%836=309%:%
%:%837=309%:%
%:%838=309%:%
%:%839=310%:%
%:%840=310%:%
%:%841=310%:%
%:%842=311%:%
%:%843=311%:%
%:%844=312%:%
%:%850=312%:%
%:%853=313%:%
%:%854=314%:%
%:%855=314%:%
%:%856=315%:%
%:%859=316%:%
%:%863=316%:%
%:%864=316%:%
%:%865=317%:%
%:%866=317%:%
%:%867=318%:%
%:%868=318%:%
%:%869=319%:%
%:%870=319%:%
%:%871=320%:%
%:%872=320%:%
%:%873=321%:%
%:%874=321%:%
%:%875=322%:%
%:%876=322%:%
%:%877=323%:%
%:%878=323%:%
%:%879=324%:%
%:%880=324%:%
%:%881=325%:%
%:%882=325%:%
%:%883=326%:%
%:%884=326%:%
%:%885=327%:%
%:%886=327%:%
%:%887=328%:%
%:%888=328%:%
%:%889=329%:%
%:%890=329%:%
%:%891=330%:%
%:%892=330%:%
%:%893=330%:%
%:%894=331%:%
%:%895=331%:%
%:%896=332%:%
%:%897=332%:%
%:%898=333%:%
%:%899=333%:%
%:%900=333%:%
%:%901=334%:%
%:%902=334%:%
%:%903=334%:%
%:%904=335%:%
%:%905=335%:%
%:%906=335%:%
%:%907=336%:%
%:%908=336%:%
%:%909=337%:%
%:%910=337%:%
%:%911=338%:%
%:%912=338%:%
%:%913=339%:%
%:%914=339%:%
%:%915=339%:%
%:%916=340%:%
%:%917=340%:%
%:%918=341%:%
%:%924=341%:%
%:%927=342%:%
%:%928=343%:%
%:%929=344%:%
%:%930=345%:%
%:%931=346%:%
%:%932=347%:%
%:%933=348%:%
%:%934=348%:%
%:%935=349%:%
%:%936=350%:%
%:%937=351%:%
%:%938=352%:%
%:%939=352%:%
%:%940=353%:%
%:%941=354%:%
%:%942=355%:%
%:%949=356%:%
%:%950=356%:%
%:%951=357%:%
%:%952=357%:%
%:%953=358%:%
%:%954=358%:%
%:%955=359%:%
%:%956=359%:%
%:%957=360%:%
%:%958=360%:%
%:%959=360%:%
%:%960=361%:%
%:%961=361%:%
%:%962=362%:%
%:%963=362%:%
%:%964=363%:%
%:%965=363%:%
%:%966=364%:%
%:%967=364%:%
%:%968=365%:%
%:%969=366%:%
%:%970=366%:%
%:%971=367%:%
%:%972=368%:%
%:%973=368%:%
%:%974=369%:%
%:%975=369%:%
%:%976=370%:%
%:%977=370%:%
%:%978=371%:%
%:%979=371%:%
%:%980=372%:%
%:%981=372%:%
%:%982=373%:%
%:%983=373%:%
%:%984=374%:%
%:%985=374%:%
%:%986=375%:%
%:%987=375%:%
%:%992=380%:%
%:%993=381%:%
%:%994=382%:%
%:%995=383%:%
%:%996=383%:%
%:%997=384%:%
%:%998=384%:%
%:%999=385%:%
%:%1000=385%:%
%:%1001=386%:%
%:%1002=386%:%
%:%1003=387%:%
%:%1004=387%:%
%:%1005=387%:%
%:%1006=388%:%
%:%1007=388%:%
%:%1008=389%:%
%:%1009=389%:%
%:%1010=390%:%
%:%1011=390%:%
%:%1012=391%:%
%:%1013=391%:%
%:%1014=391%:%
%:%1015=392%:%
%:%1016=392%:%
%:%1017=393%:%
%:%1018=393%:%
%:%1019=393%:%
%:%1020=394%:%
%:%1021=394%:%
%:%1022=395%:%
%:%1023=395%:%
%:%1024=395%:%
%:%1025=396%:%
%:%1026=397%:%
%:%1027=397%:%
%:%1028=398%:%
%:%1029=398%:%
%:%1030=399%:%
%:%1031=399%:%
%:%1032=400%:%
%:%1033=400%:%
%:%1034=401%:%
%:%1035=401%:%
%:%1036=402%:%
%:%1037=402%:%
%:%1038=402%:%
%:%1039=403%:%
%:%1040=403%:%
%:%1041=404%:%
%:%1042=404%:%
%:%1043=405%:%
%:%1044=405%:%
%:%1045=406%:%
%:%1046=406%:%
%:%1047=406%:%
%:%1048=407%:%
%:%1049=407%:%
%:%1050=408%:%
%:%1051=408%:%
%:%1052=409%:%
%:%1053=409%:%
%:%1054=409%:%
%:%1055=410%:%
%:%1056=410%:%
%:%1057=411%:%
%:%1058=411%:%
%:%1059=412%:%
%:%1060=412%:%
%:%1061=413%:%
%:%1062=413%:%
%:%1063=413%:%
%:%1064=414%:%
%:%1065=414%:%
%:%1066=415%:%
%:%1067=415%:%
%:%1068=416%:%
%:%1069=416%:%
%:%1070=417%:%
%:%1071=417%:%
%:%1072=418%:%
%:%1073=418%:%
%:%1074=418%:%
%:%1075=419%:%
%:%1076=419%:%
%:%1077=420%:%
%:%1078=420%:%
%:%1079=421%:%
%:%1080=421%:%
%:%1081=422%:%
%:%1082=422%:%
%:%1083=422%:%
%:%1084=423%:%
%:%1085=423%:%
%:%1086=423%:%
%:%1087=424%:%
%:%1088=424%:%
%:%1089=425%:%
%:%1090=426%:%
%:%1091=426%:%
%:%1092=426%:%
%:%1093=427%:%
%:%1094=427%:%
%:%1095=427%:%
%:%1096=428%:%
%:%1097=428%:%
%:%1098=429%:%
%:%1099=429%:%
%:%1100=430%:%
%:%1101=431%:%
%:%1102=431%:%
%:%1103=431%:%
%:%1104=432%:%
%:%1105=432%:%
%:%1106=432%:%
%:%1107=433%:%
%:%1113=433%:%
%:%1116=434%:%
%:%1117=435%:%
%:%1118=435%:%
%:%1119=436%:%
%:%1120=437%:%
%:%1123=438%:%
%:%1127=438%:%
%:%1128=438%:%
%:%1129=439%:%
%:%1130=439%:%
%:%1131=440%:%
%:%1132=440%:%
%:%1133=441%:%
%:%1134=441%:%
%:%1139=441%:%
%:%1142=442%:%
%:%1143=443%:%
%:%1144=443%:%
%:%1147=444%:%
%:%1151=444%:%
%:%1152=444%:%
%:%1153=444%:%
%:%1158=444%:%
%:%1161=445%:%
%:%1162=446%:%
%:%1163=446%:%
%:%1166=447%:%
%:%1170=447%:%
%:%1171=447%:%
%:%1176=447%:%
%:%1179=448%:%
%:%1180=449%:%
%:%1181=449%:%
%:%1182=450%:%
%:%1183=451%:%
%:%1186=452%:%
%:%1190=452%:%
%:%1191=452%:%
%:%1192=452%:%
%:%1197=452%:%
%:%1200=453%:%
%:%1201=454%:%
%:%1202=455%:%
%:%1203=456%:%
%:%1204=457%:%
%:%1205=458%:%
%:%1206=459%:%
%:%1207=460%:%
%:%1208=460%:%
%:%1209=461%:%
%:%1210=462%:%
%:%1211=463%:%
%:%1212=464%:%
%:%1213=465%:%
%:%1214=465%:%
%:%1215=466%:%
%:%1218=467%:%
%:%1222=467%:%
%:%1223=467%:%
%:%1228=467%:%
%:%1231=468%:%
%:%1232=470%:%
%:%1233=471%:%
%:%1234=471%:%
%:%1235=472%:%
%:%1242=473%:%
%:%1243=473%:%
%:%1244=474%:%
%:%1245=474%:%
%:%1246=475%:%
%:%1247=475%:%
%:%1248=475%:%
%:%1249=476%:%
%:%1250=476%:%
%:%1251=477%:%
%:%1252=477%:%
%:%1253=478%:%
%:%1254=479%:%
%:%1255=479%:%
%:%1256=480%:%
%:%1257=480%:%
%:%1258=481%:%
%:%1259=482%:%
%:%1260=482%:%
%:%1261=483%:%
%:%1262=483%:%
%:%1263=484%:%
%:%1264=484%:%
%:%1265=485%:%
%:%1266=485%:%
%:%1267=486%:%
%:%1268=486%:%
%:%1269=486%:%
%:%1270=487%:%
%:%1271=487%:%
%:%1272=488%:%
%:%1273=488%:%
%:%1274=489%:%
%:%1275=489%:%
%:%1276=490%:%
%:%1277=490%:%
%:%1278=491%:%
%:%1279=491%:%
%:%1280=492%:%
%:%1281=492%:%
%:%1282=492%:%
%:%1283=493%:%
%:%1284=493%:%
%:%1285=493%:%
%:%1286=494%:%
%:%1287=494%:%
%:%1288=494%:%
%:%1289=495%:%
%:%1290=495%:%
%:%1291=496%:%
%:%1292=497%:%
%:%1293=497%:%
%:%1294=498%:%
%:%1295=498%:%
%:%1296=498%:%
%:%1297=499%:%
%:%1298=499%:%
%:%1299=500%:%
%:%1300=500%:%
%:%1301=501%:%
%:%1302=501%:%
%:%1303=502%:%
%:%1304=502%:%
%:%1305=503%:%
%:%1306=504%:%
%:%1307=504%:%
%:%1308=505%:%
%:%1309=505%:%
%:%1310=506%:%
%:%1311=506%:%
%:%1312=507%:%
%:%1313=507%:%
%:%1314=508%:%
%:%1315=508%:%
%:%1316=508%:%
%:%1317=509%:%
%:%1318=509%:%
%:%1319=510%:%
%:%1320=511%:%
%:%1321=511%:%
%:%1322=512%:%
%:%1323=512%:%
%:%1324=512%:%
%:%1325=513%:%
%:%1326=513%:%
%:%1327=514%:%
%:%1328=514%:%
%:%1329=515%:%
%:%1330=515%:%
%:%1331=516%:%
%:%1332=516%:%
%:%1333=517%:%
%:%1334=517%:%
%:%1335=517%:%
%:%1336=518%:%
%:%1337=518%:%
%:%1338=519%:%
%:%1339=520%:%
%:%1340=520%:%
%:%1341=521%:%
%:%1342=521%:%
%:%1343=522%:%
%:%1344=522%:%
%:%1345=522%:%
%:%1346=523%:%
%:%1347=523%:%
%:%1348=524%:%
%:%1349=524%:%
%:%1350=524%:%
%:%1351=525%:%
%:%1352=525%:%
%:%1353=525%:%
%:%1354=526%:%
%:%1355=526%:%
%:%1356=527%:%
%:%1357=527%:%
%:%1358=528%:%
%:%1359=528%:%
%:%1360=529%:%
%:%1361=529%:%
%:%1362=529%:%
%:%1363=530%:%
%:%1364=530%:%
%:%1365=530%:%
%:%1366=531%:%
%:%1372=531%:%
%:%1375=532%:%
%:%1376=533%:%
%:%1377=533%:%
%:%1378=534%:%
%:%1381=535%:%
%:%1385=535%:%
%:%1386=535%:%
%:%1387=536%:%
%:%1388=536%:%
%:%1389=537%:%
%:%1390=537%:%
%:%1391=538%:%
%:%1392=538%:%
%:%1393=539%:%
%:%1394=539%:%
%:%1395=539%:%
%:%1396=540%:%
%:%1397=540%:%
%:%1398=540%:%
%:%1399=541%:%
%:%1400=541%:%
%:%1401=541%:%
%:%1402=542%:%
%:%1403=542%:%
%:%1404=542%:%
%:%1405=543%:%
%:%1406=543%:%
%:%1407=543%:%
%:%1408=544%:%
%:%1409=544%:%
%:%1410=545%:%
%:%1416=545%:%
%:%1419=546%:%
%:%1420=547%:%
%:%1421=548%:%
%:%1422=548%:%
%:%1423=549%:%
%:%1430=550%:%
%:%1431=550%:%
%:%1432=551%:%
%:%1433=551%:%
%:%1434=552%:%
%:%1435=552%:%
%:%1436=553%:%
%:%1437=554%:%
%:%1438=555%:%
%:%1439=555%:%
%:%1440=556%:%
%:%1441=557%:%
%:%1447=557%:%
%:%1452=558%:%
%:%1457=559%:%